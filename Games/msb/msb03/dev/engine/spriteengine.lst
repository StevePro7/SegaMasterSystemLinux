                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.1.0 #12072 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module spriteengine
                                      6 	.optsdcc -mz80
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _free
                                     12 	.globl _malloc
                                     13 	.globl _SMS_VRAMmemcpy
                                     14 	.globl _SMS_finalizeSprites
                                     15 	.globl _SMS_addSprite
                                     16 	.globl _SMS_initSprites
                                     17 	.globl _entityVramPosition
                                     18 	.globl _entityIndex
                                     19 	.globl _entitylist
                                     20 	.globl _SMS_SRAM
                                     21 	.globl _SRAM_bank_to_be_mapped_on_slot2
                                     22 	.globl _ROM_bank_to_be_mapped_on_slot2
                                     23 	.globl _initEngine
                                     24 	.globl _addEntity
                                     25 	.globl _setAnimation
                                     26 	.globl _forceReload
                                     27 	.globl _isFrameEnded
                                     28 	.globl _isAnimationEnded
                                     29 	.globl _setDirection
                                     30 	.globl _updateAnimations
                                     31 	.globl _updateTiles
                                     32 	.globl _drawEntities
                                     33 	.globl _move_entity
                                     34 ;--------------------------------------------------------
                                     35 ; special function registers
                                     36 ;--------------------------------------------------------
                                     37 ;--------------------------------------------------------
                                     38 ; ram data
                                     39 ;--------------------------------------------------------
                                     40 	.area _DATA
                           00FFFF    41 G$ROM_bank_to_be_mapped_on_slot2$0_0$0 == 0xffff
                           00FFFF    42 _ROM_bank_to_be_mapped_on_slot2	=	0xffff
                           00FFFC    43 G$SRAM_bank_to_be_mapped_on_slot2$0_0$0 == 0xfffc
                           00FFFC    44 _SRAM_bank_to_be_mapped_on_slot2	=	0xfffc
                           008000    45 G$SMS_SRAM$0_0$0 == 0x8000
                           008000    46 _SMS_SRAM	=	0x8000
                           000000    47 G$entitylist$0_0$0==.
      000000                         48 _entitylist::
      000000                         49 	.ds 10
                                     50 ;--------------------------------------------------------
                                     51 ; ram data
                                     52 ;--------------------------------------------------------
                                     53 	.area _INITIALIZED
                           000000    54 G$entityIndex$0_0$0==.
      000000                         55 _entityIndex::
      000000                         56 	.ds 1
                           000001    57 G$entityVramPosition$0_0$0==.
      000001                         58 _entityVramPosition::
      000001                         59 	.ds 2
                                     60 ;--------------------------------------------------------
                                     61 ; absolute external ram data
                                     62 ;--------------------------------------------------------
                                     63 	.area _DABS (ABS)
                                     64 ;--------------------------------------------------------
                                     65 ; global & static initialisations
                                     66 ;--------------------------------------------------------
                                     67 	.area _HOME
                                     68 	.area _GSINIT
                                     69 	.area _GSFINAL
                                     70 	.area _GSINIT
                                     71 ;--------------------------------------------------------
                                     72 ; Home
                                     73 ;--------------------------------------------------------
                                     74 	.area _HOME
                                     75 	.area _HOME
                                     76 ;--------------------------------------------------------
                                     77 ; code
                                     78 ;--------------------------------------------------------
                                     79 	.area _CODE
                           000000    80 	G$initEngine$0$0	= .
                                     81 	.globl	G$initEngine$0$0
                           000000    82 	C$spriteengine.c$9$0_0$98	= .
                                     83 	.globl	C$spriteengine.c$9$0_0$98
                                     84 ;spriteengine.c:9: void initEngine() {
                                     85 ;	---------------------------------
                                     86 ; Function initEngine
                                     87 ; ---------------------------------
      000000                         88 _initEngine::
                           000000    89 	C$spriteengine.c$11$3_0$100	= .
                                     90 	.globl	C$spriteengine.c$11$3_0$100
                                     91 ;spriteengine.c:11: for(i = 0;i < MAX_ENTITIES; i++) {
      000000 01 00 00         [10]   92 	ld	bc, #0x0000
      000003                         93 00102$:
                           000003    94 	C$spriteengine.c$12$3_0$100	= .
                                     95 	.globl	C$spriteengine.c$12$3_0$100
                                     96 ;spriteengine.c:12: free(entitylist[i]);
      000003 69               [ 4]   97 	ld	l, c
      000004 60               [ 4]   98 	ld	h, b
      000005 29               [11]   99 	add	hl, hl
      000006 11r00r00         [10]  100 	ld	de, #_entitylist
      000009 19               [11]  101 	add	hl, de
      00000A 5E               [ 7]  102 	ld	e, (hl)
      00000B 23               [ 6]  103 	inc	hl
      00000C 56               [ 7]  104 	ld	d, (hl)
      00000D 2B               [ 6]  105 	dec	hl
      00000E E5               [11]  106 	push	hl
      00000F C5               [11]  107 	push	bc
      000010 D5               [11]  108 	push	de
      000011 CDr00r00         [17]  109 	call	_free
      000014 F1               [10]  110 	pop	af
      000015 C1               [10]  111 	pop	bc
      000016 E1               [10]  112 	pop	hl
                           000017   113 	C$spriteengine.c$13$3_0$100	= .
                                    114 	.globl	C$spriteengine.c$13$3_0$100
                                    115 ;spriteengine.c:13: entitylist[i] = 0;
      000017 AF               [ 4]  116 	xor	a, a
      000018 77               [ 7]  117 	ld	(hl), a
      000019 23               [ 6]  118 	inc	hl
      00001A 77               [ 7]  119 	ld	(hl), a
                           00001B   120 	C$spriteengine.c$11$2_0$99	= .
                                    121 	.globl	C$spriteengine.c$11$2_0$99
                                    122 ;spriteengine.c:11: for(i = 0;i < MAX_ENTITIES; i++) {
      00001B 03               [ 6]  123 	inc	bc
      00001C 79               [ 4]  124 	ld	a, c
      00001D D6 05            [ 7]  125 	sub	a, #0x05
      00001F 78               [ 4]  126 	ld	a, b
      000020 17               [ 4]  127 	rla
      000021 3F               [ 4]  128 	ccf
      000022 1F               [ 4]  129 	rra
      000023 DE 80            [ 7]  130 	sbc	a, #0x80
      000025 38 DC            [12]  131 	jr	C, 00102$
                           000027   132 	C$spriteengine.c$15$1_0$98	= .
                                    133 	.globl	C$spriteengine.c$15$1_0$98
                                    134 ;spriteengine.c:15: entityIndex = 0;
      000027 3E 00            [ 7]  135 	ld	a, #0x00
      000029 32r00r00         [13]  136 	ld	(#_entityIndex), a
                           00002C   137 	C$spriteengine.c$16$1_0$98	= .
                                    138 	.globl	C$spriteengine.c$16$1_0$98
                                    139 ;spriteengine.c:16: }
                           00002C   140 	C$spriteengine.c$16$1_0$98	= .
                                    141 	.globl	C$spriteengine.c$16$1_0$98
                           00002C   142 	XG$initEngine$0$0	= .
                                    143 	.globl	XG$initEngine$0$0
      00002C C9               [10]  144 	ret
                           00002D   145 	G$addEntity$0$0	= .
                                    146 	.globl	G$addEntity$0$0
                           00002D   147 	C$spriteengine.c$18$1_0$102	= .
                                    148 	.globl	C$spriteengine.c$18$1_0$102
                                    149 ;spriteengine.c:18: entity* addEntity(character* characterData, unsigned char px, unsigned char py) {
                                    150 ;	---------------------------------
                                    151 ; Function addEntity
                                    152 ; ---------------------------------
      00002D                        153 _addEntity::
      00002D DD E5            [15]  154 	push	ix
      00002F DD 21 00 00      [14]  155 	ld	ix,#0
      000033 DD 39            [15]  156 	add	ix,sp
                           000035   157 	C$spriteengine.c$19$1_0$102	= .
                                    158 	.globl	C$spriteengine.c$19$1_0$102
                                    159 ;spriteengine.c:19: entitylist[entityIndex] = malloc(sizeof(entity));
      000035 01r00r00         [10]  160 	ld	bc, #_entitylist+0
      000038 3Ar00r00         [13]  161 	ld	a, (#_entityIndex + 0)
      00003B 6F               [ 4]  162 	ld	l, a
      00003C 26 00            [ 7]  163 	ld	h, #0x00
      00003E 29               [11]  164 	add	hl, hl
      00003F 09               [11]  165 	add	hl, bc
      000040 E5               [11]  166 	push	hl
      000041 C5               [11]  167 	push	bc
      000042 11 0E 00         [10]  168 	ld	de, #0x000e
      000045 D5               [11]  169 	push	de
      000046 CDr00r00         [17]  170 	call	_malloc
      000049 F1               [10]  171 	pop	af
      00004A EB               [ 4]  172 	ex	de, hl
      00004B C1               [10]  173 	pop	bc
      00004C E1               [10]  174 	pop	hl
      00004D 73               [ 7]  175 	ld	(hl), e
      00004E 23               [ 6]  176 	inc	hl
      00004F 72               [ 7]  177 	ld	(hl), d
                           000050   178 	C$spriteengine.c$20$1_0$102	= .
                                    179 	.globl	C$spriteengine.c$20$1_0$102
                                    180 ;spriteengine.c:20: entitylist[entityIndex]->entityIndex = entityIndex;
      000050 FD 21r00r00      [14]  181 	ld	iy, #_entityIndex
      000054 FD 6E 00         [19]  182 	ld	l, 0 (iy)
      000057 26 00            [ 7]  183 	ld	h, #0x00
      000059 29               [11]  184 	add	hl, hl
      00005A 09               [11]  185 	add	hl, bc
      00005B 5E               [ 7]  186 	ld	e, (hl)
      00005C 23               [ 6]  187 	inc	hl
      00005D 56               [ 7]  188 	ld	d, (hl)
      00005E 13               [ 6]  189 	inc	de
      00005F 13               [ 6]  190 	inc	de
      000060 FD 7E 00         [19]  191 	ld	a, 0 (iy)
      000063 12               [ 7]  192 	ld	(de), a
                           000064   193 	C$spriteengine.c$21$1_0$102	= .
                                    194 	.globl	C$spriteengine.c$21$1_0$102
                                    195 ;spriteengine.c:21: entitylist[entityIndex]->currentAnimation = 0;
      000064 FD 6E 00         [19]  196 	ld	l, 0 (iy)
      000067 26 00            [ 7]  197 	ld	h, #0x00
      000069 29               [11]  198 	add	hl, hl
      00006A 09               [11]  199 	add	hl, bc
      00006B 5E               [ 7]  200 	ld	e, (hl)
      00006C 23               [ 6]  201 	inc	hl
      00006D 56               [ 7]  202 	ld	d, (hl)
      00006E 21 06 00         [10]  203 	ld	hl, #0x0006
      000071 19               [11]  204 	add	hl, de
      000072 36 00            [10]  205 	ld	(hl), #0x00
                           000074   206 	C$spriteengine.c$22$1_0$102	= .
                                    207 	.globl	C$spriteengine.c$22$1_0$102
                                    208 ;spriteengine.c:22: entitylist[entityIndex]->currentFrame = 0;
      000074 FD 6E 00         [19]  209 	ld	l, 0 (iy)
      000077 26 00            [ 7]  210 	ld	h, #0x00
      000079 29               [11]  211 	add	hl, hl
      00007A 09               [11]  212 	add	hl, bc
      00007B 5E               [ 7]  213 	ld	e, (hl)
      00007C 23               [ 6]  214 	inc	hl
      00007D 56               [ 7]  215 	ld	d, (hl)
      00007E 21 07 00         [10]  216 	ld	hl, #0x0007
      000081 19               [11]  217 	add	hl, de
      000082 36 00            [10]  218 	ld	(hl), #0x00
                           000084   219 	C$spriteengine.c$23$1_0$102	= .
                                    220 	.globl	C$spriteengine.c$23$1_0$102
                                    221 ;spriteengine.c:23: entitylist[entityIndex]->framecnt = 0;
      000084 FD 6E 00         [19]  222 	ld	l, 0 (iy)
      000087 26 00            [ 7]  223 	ld	h, #0x00
      000089 29               [11]  224 	add	hl, hl
      00008A 09               [11]  225 	add	hl, bc
      00008B 5E               [ 7]  226 	ld	e, (hl)
      00008C 23               [ 6]  227 	inc	hl
      00008D 56               [ 7]  228 	ld	d, (hl)
      00008E 21 08 00         [10]  229 	ld	hl, #0x0008
      000091 19               [11]  230 	add	hl, de
      000092 36 00            [10]  231 	ld	(hl), #0x00
                           000094   232 	C$spriteengine.c$24$1_0$102	= .
                                    233 	.globl	C$spriteengine.c$24$1_0$102
                                    234 ;spriteengine.c:24: entitylist[entityIndex]->has2ReloadTiles = true;
      000094 FD 6E 00         [19]  235 	ld	l, 0 (iy)
      000097 26 00            [ 7]  236 	ld	h, #0x00
      000099 29               [11]  237 	add	hl, hl
      00009A 09               [11]  238 	add	hl, bc
      00009B 5E               [ 7]  239 	ld	e, (hl)
      00009C 23               [ 6]  240 	inc	hl
      00009D 56               [ 7]  241 	ld	d, (hl)
      00009E 21 0B 00         [10]  242 	ld	hl, #0x000b
      0000A1 19               [11]  243 	add	hl, de
      0000A2 36 01            [10]  244 	ld	(hl), #0x01
                           0000A4   245 	C$spriteengine.c$25$1_0$102	= .
                                    246 	.globl	C$spriteengine.c$25$1_0$102
                                    247 ;spriteengine.c:25: entitylist[entityIndex]->frameEnded = true;
      0000A4 FD 6E 00         [19]  248 	ld	l, 0 (iy)
      0000A7 26 00            [ 7]  249 	ld	h, #0x00
      0000A9 29               [11]  250 	add	hl, hl
      0000AA 09               [11]  251 	add	hl, bc
      0000AB 5E               [ 7]  252 	ld	e, (hl)
      0000AC 23               [ 6]  253 	inc	hl
      0000AD 56               [ 7]  254 	ld	d, (hl)
      0000AE 21 0D 00         [10]  255 	ld	hl, #0x000d
      0000B1 19               [11]  256 	add	hl, de
      0000B2 36 01            [10]  257 	ld	(hl), #0x01
                           0000B4   258 	C$spriteengine.c$26$1_0$102	= .
                                    259 	.globl	C$spriteengine.c$26$1_0$102
                                    260 ;spriteengine.c:26: entitylist[entityIndex]->animationEnded = true;
      0000B4 FD 6E 00         [19]  261 	ld	l, 0 (iy)
      0000B7 26 00            [ 7]  262 	ld	h, #0x00
      0000B9 29               [11]  263 	add	hl, hl
      0000BA 09               [11]  264 	add	hl, bc
      0000BB 5E               [ 7]  265 	ld	e, (hl)
      0000BC 23               [ 6]  266 	inc	hl
      0000BD 56               [ 7]  267 	ld	d, (hl)
      0000BE 21 0C 00         [10]  268 	ld	hl, #0x000c
      0000C1 19               [11]  269 	add	hl, de
      0000C2 36 01            [10]  270 	ld	(hl), #0x01
                           0000C4   271 	C$spriteengine.c$27$1_0$102	= .
                                    272 	.globl	C$spriteengine.c$27$1_0$102
                                    273 ;spriteengine.c:27: entitylist[entityIndex]->characterData = characterData;
      0000C4 FD 6E 00         [19]  274 	ld	l, 0 (iy)
      0000C7 26 00            [ 7]  275 	ld	h, #0x00
      0000C9 29               [11]  276 	add	hl, hl
      0000CA 09               [11]  277 	add	hl, bc
      0000CB 5E               [ 7]  278 	ld	e, (hl)
      0000CC 23               [ 6]  279 	inc	hl
      0000CD 56               [ 7]  280 	ld	d, (hl)
      0000CE DD 7E 04         [19]  281 	ld	a, 4 (ix)
      0000D1 12               [ 7]  282 	ld	(de), a
      0000D2 13               [ 6]  283 	inc	de
      0000D3 DD 7E 05         [19]  284 	ld	a, 5 (ix)
      0000D6 12               [ 7]  285 	ld	(de), a
                           0000D7   286 	C$spriteengine.c$28$1_0$102	= .
                                    287 	.globl	C$spriteengine.c$28$1_0$102
                                    288 ;spriteengine.c:28: entitylist[entityIndex]->px = px;
      0000D7 FD 6E 00         [19]  289 	ld	l, 0 (iy)
      0000DA 26 00            [ 7]  290 	ld	h, #0x00
      0000DC 29               [11]  291 	add	hl, hl
      0000DD 09               [11]  292 	add	hl, bc
      0000DE 5E               [ 7]  293 	ld	e, (hl)
      0000DF 23               [ 6]  294 	inc	hl
      0000E0 56               [ 7]  295 	ld	d, (hl)
      0000E1 EB               [ 4]  296 	ex	de,hl
      0000E2 23               [ 6]  297 	inc	hl
      0000E3 23               [ 6]  298 	inc	hl
      0000E4 23               [ 6]  299 	inc	hl
      0000E5 DD 7E 06         [19]  300 	ld	a, 6 (ix)
      0000E8 77               [ 7]  301 	ld	(hl), a
                           0000E9   302 	C$spriteengine.c$29$1_0$102	= .
                                    303 	.globl	C$spriteengine.c$29$1_0$102
                                    304 ;spriteengine.c:29: entitylist[entityIndex]->py = py;
      0000E9 FD 6E 00         [19]  305 	ld	l, 0 (iy)
      0000EC 26 00            [ 7]  306 	ld	h, #0x00
      0000EE 29               [11]  307 	add	hl, hl
      0000EF 09               [11]  308 	add	hl, bc
      0000F0 5E               [ 7]  309 	ld	e, (hl)
      0000F1 23               [ 6]  310 	inc	hl
      0000F2 56               [ 7]  311 	ld	d, (hl)
      0000F3 13               [ 6]  312 	inc	de
      0000F4 13               [ 6]  313 	inc	de
      0000F5 13               [ 6]  314 	inc	de
      0000F6 13               [ 6]  315 	inc	de
      0000F7 DD 7E 07         [19]  316 	ld	a, 7 (ix)
      0000FA 12               [ 7]  317 	ld	(de), a
                           0000FB   318 	C$spriteengine.c$30$1_0$102	= .
                                    319 	.globl	C$spriteengine.c$30$1_0$102
                                    320 ;spriteengine.c:30: entitylist[entityIndex]->direction = RIGHT_DIRECTION;
      0000FB FD 6E 00         [19]  321 	ld	l, 0 (iy)
      0000FE 26 00            [ 7]  322 	ld	h, #0x00
      000100 29               [11]  323 	add	hl, hl
      000101 09               [11]  324 	add	hl, bc
      000102 5E               [ 7]  325 	ld	e, (hl)
      000103 23               [ 6]  326 	inc	hl
      000104 56               [ 7]  327 	ld	d, (hl)
      000105 21 05 00         [10]  328 	ld	hl, #0x0005
      000108 19               [11]  329 	add	hl, de
      000109 36 00            [10]  330 	ld	(hl), #0x00
                           00010B   331 	C$spriteengine.c$31$1_0$102	= .
                                    332 	.globl	C$spriteengine.c$31$1_0$102
                                    333 ;spriteengine.c:31: entitylist[entityIndex]->vramposition = entityVramPosition;
      00010B FD 6E 00         [19]  334 	ld	l, 0 (iy)
      00010E 26 00            [ 7]  335 	ld	h, #0x00
      000110 29               [11]  336 	add	hl, hl
      000111 09               [11]  337 	add	hl, bc
      000112 5E               [ 7]  338 	ld	e, (hl)
      000113 23               [ 6]  339 	inc	hl
      000114 56               [ 7]  340 	ld	d, (hl)
      000115 21 09 00         [10]  341 	ld	hl, #0x0009
      000118 19               [11]  342 	add	hl, de
      000119 FD 21r01r00      [14]  343 	ld	iy, #_entityVramPosition
      00011D FD 7E 00         [19]  344 	ld	a, 0 (iy)
      000120 77               [ 7]  345 	ld	(hl), a
      000121 23               [ 6]  346 	inc	hl
      000122 FD 7E 01         [19]  347 	ld	a, 1 (iy)
      000125 77               [ 7]  348 	ld	(hl), a
                           000126   349 	C$spriteengine.c$32$1_0$102	= .
                                    350 	.globl	C$spriteengine.c$32$1_0$102
                                    351 ;spriteengine.c:32: entityVramPosition = entityVramPosition + characterData->maxsprites;
      000126 DD 6E 04         [19]  352 	ld	l, 4 (ix)
      000129 DD 66 05         [19]  353 	ld	h, 5 (ix)
      00012C 23               [ 6]  354 	inc	hl
      00012D 5E               [ 7]  355 	ld	e, (hl)
      00012E 16 00            [ 7]  356 	ld	d, #0x00
      000130 21r01r00         [10]  357 	ld	hl, #_entityVramPosition
      000133 7E               [ 7]  358 	ld	a, (hl)
      000134 83               [ 4]  359 	add	a, e
      000135 77               [ 7]  360 	ld	(hl), a
      000136 23               [ 6]  361 	inc	hl
      000137 7E               [ 7]  362 	ld	a, (hl)
      000138 8A               [ 4]  363 	adc	a, d
      000139 77               [ 7]  364 	ld	(hl), a
                           00013A   365 	C$spriteengine.c$33$1_0$102	= .
                                    366 	.globl	C$spriteengine.c$33$1_0$102
                                    367 ;spriteengine.c:33: entityIndex++;
      00013A FD 21r00r00      [14]  368 	ld	iy, #_entityIndex
      00013E FD 34 00         [23]  369 	inc	0 (iy)
                           000141   370 	C$spriteengine.c$34$1_0$102	= .
                                    371 	.globl	C$spriteengine.c$34$1_0$102
                                    372 ;spriteengine.c:34: return entitylist[entityIndex - 1];
      000141 FD 7E 00         [19]  373 	ld	a, 0 (iy)
      000144 3D               [ 4]  374 	dec	a
      000145 6F               [ 4]  375 	ld	l, a
      000146 17               [ 4]  376 	rla
      000147 9F               [ 4]  377 	sbc	a, a
      000148 67               [ 4]  378 	ld	h, a
      000149 29               [11]  379 	add	hl, hl
      00014A 09               [11]  380 	add	hl, bc
      00014B 5E               [ 7]  381 	ld	e, (hl)
      00014C 23               [ 6]  382 	inc	hl
      00014D 56               [ 7]  383 	ld	d, (hl)
      00014E EB               [ 4]  384 	ex	de, hl
                           00014F   385 	C$spriteengine.c$35$1_0$102	= .
                                    386 	.globl	C$spriteengine.c$35$1_0$102
                                    387 ;spriteengine.c:35: }
      00014F DD E1            [14]  388 	pop	ix
                           000151   389 	C$spriteengine.c$35$1_0$102	= .
                                    390 	.globl	C$spriteengine.c$35$1_0$102
                           000151   391 	XG$addEntity$0$0	= .
                                    392 	.globl	XG$addEntity$0$0
      000151 C9               [10]  393 	ret
                           000152   394 	G$setAnimation$0$0	= .
                                    395 	.globl	G$setAnimation$0$0
                           000152   396 	C$spriteengine.c$37$1_0$104	= .
                                    397 	.globl	C$spriteengine.c$37$1_0$104
                                    398 ;spriteengine.c:37: void setAnimation(unsigned char entitynumber, int animationNumber) {
                                    399 ;	---------------------------------
                                    400 ; Function setAnimation
                                    401 ; ---------------------------------
      000152                        402 _setAnimation::
      000152 DD E5            [15]  403 	push	ix
      000154 DD 21 00 00      [14]  404 	ld	ix,#0
      000158 DD 39            [15]  405 	add	ix,sp
                           00015A   406 	C$spriteengine.c$38$1_0$104	= .
                                    407 	.globl	C$spriteengine.c$38$1_0$104
                                    408 ;spriteengine.c:38: if(entitylist[entitynumber]->currentAnimation != animationNumber) {
      00015A 01r00r00         [10]  409 	ld	bc, #_entitylist+0
      00015D DD 6E 04         [19]  410 	ld	l, 4 (ix)
      000160 26 00            [ 7]  411 	ld	h, #0x00
      000162 29               [11]  412 	add	hl, hl
      000163 09               [11]  413 	add	hl, bc
      000164 5D               [ 4]  414 	ld	e, l
      000165 54               [ 4]  415 	ld	d, h
      000166 4E               [ 7]  416 	ld	c, (hl)
      000167 23               [ 6]  417 	inc	hl
      000168 46               [ 7]  418 	ld	b, (hl)
      000169 69               [ 4]  419 	ld	l, c
      00016A 60               [ 4]  420 	ld	h, b
      00016B C5               [11]  421 	push	bc
      00016C 01 06 00         [10]  422 	ld	bc, #0x0006
      00016F 09               [11]  423 	add	hl, bc
      000170 C1               [10]  424 	pop	bc
      000171 26 00            [ 7]  425 	ld	h, #0x00
      000173 7E               [ 7]  426 	ld	a, (hl)
      000174 DD 96 05         [19]  427 	sub	a, 5 (ix)
      000177 20 06            [12]  428 	jr	NZ, 00110$
      000179 7C               [ 4]  429 	ld	a, h
      00017A DD 96 06         [19]  430 	sub	a, 6 (ix)
      00017D 28 06            [12]  431 	jr	Z, 00102$
      00017F                        432 00110$:
                           00017F   433 	C$spriteengine.c$39$2_0$105	= .
                                    434 	.globl	C$spriteengine.c$39$2_0$105
                                    435 ;spriteengine.c:39: entitylist[entitynumber]->has2ReloadTiles = true;	
      00017F 21 0B 00         [10]  436 	ld	hl, #0x000b
      000182 09               [11]  437 	add	hl, bc
      000183 36 01            [10]  438 	ld	(hl), #0x01
      000185                        439 00102$:
                           000185   440 	C$spriteengine.c$41$1_0$104	= .
                                    441 	.globl	C$spriteengine.c$41$1_0$104
                                    442 ;spriteengine.c:41: entitylist[entitynumber]->currentAnimation = animationNumber;
      000185 6B               [ 4]  443 	ld	l, e
      000186 62               [ 4]  444 	ld	h, d
      000187 4E               [ 7]  445 	ld	c, (hl)
      000188 23               [ 6]  446 	inc	hl
      000189 46               [ 7]  447 	ld	b, (hl)
      00018A 21 06 00         [10]  448 	ld	hl, #0x0006
      00018D 09               [11]  449 	add	hl, bc
      00018E DD 7E 05         [19]  450 	ld	a, 5 (ix)
      000191 77               [ 7]  451 	ld	(hl), a
                           000192   452 	C$spriteengine.c$42$1_0$104	= .
                                    453 	.globl	C$spriteengine.c$42$1_0$104
                                    454 ;spriteengine.c:42: entitylist[entitynumber]->frameEnded = false;
      000192 6B               [ 4]  455 	ld	l, e
      000193 62               [ 4]  456 	ld	h, d
      000194 4E               [ 7]  457 	ld	c, (hl)
      000195 23               [ 6]  458 	inc	hl
      000196 46               [ 7]  459 	ld	b, (hl)
      000197 21 0D 00         [10]  460 	ld	hl, #0x000d
      00019A 09               [11]  461 	add	hl, bc
      00019B 36 00            [10]  462 	ld	(hl), #0x00
                           00019D   463 	C$spriteengine.c$43$1_0$104	= .
                                    464 	.globl	C$spriteengine.c$43$1_0$104
                                    465 ;spriteengine.c:43: entitylist[entitynumber]->animationEnded = false;
      00019D 6B               [ 4]  466 	ld	l, e
      00019E 62               [ 4]  467 	ld	h, d
      00019F 4E               [ 7]  468 	ld	c, (hl)
      0001A0 23               [ 6]  469 	inc	hl
      0001A1 46               [ 7]  470 	ld	b, (hl)
      0001A2 21 0C 00         [10]  471 	ld	hl, #0x000c
      0001A5 09               [11]  472 	add	hl, bc
      0001A6 36 00            [10]  473 	ld	(hl), #0x00
                           0001A8   474 	C$spriteengine.c$44$1_0$104	= .
                                    475 	.globl	C$spriteengine.c$44$1_0$104
                                    476 ;spriteengine.c:44: entitylist[entitynumber]->currentFrame = 0;
      0001A8 6B               [ 4]  477 	ld	l, e
      0001A9 62               [ 4]  478 	ld	h, d
      0001AA 4E               [ 7]  479 	ld	c, (hl)
      0001AB 23               [ 6]  480 	inc	hl
      0001AC 46               [ 7]  481 	ld	b, (hl)
      0001AD 21 07 00         [10]  482 	ld	hl, #0x0007
      0001B0 09               [11]  483 	add	hl, bc
      0001B1 36 00            [10]  484 	ld	(hl), #0x00
                           0001B3   485 	C$spriteengine.c$45$1_0$104	= .
                                    486 	.globl	C$spriteengine.c$45$1_0$104
                                    487 ;spriteengine.c:45: entitylist[entitynumber]->framecnt = 0;	
      0001B3 EB               [ 4]  488 	ex	de,hl
      0001B4 4E               [ 7]  489 	ld	c, (hl)
      0001B5 23               [ 6]  490 	inc	hl
      0001B6 46               [ 7]  491 	ld	b, (hl)
      0001B7 21 08 00         [10]  492 	ld	hl, #0x0008
      0001BA 09               [11]  493 	add	hl, bc
      0001BB 36 00            [10]  494 	ld	(hl), #0x00
                           0001BD   495 	C$spriteengine.c$46$1_0$104	= .
                                    496 	.globl	C$spriteengine.c$46$1_0$104
                                    497 ;spriteengine.c:46: }
      0001BD DD E1            [14]  498 	pop	ix
                           0001BF   499 	C$spriteengine.c$46$1_0$104	= .
                                    500 	.globl	C$spriteengine.c$46$1_0$104
                           0001BF   501 	XG$setAnimation$0$0	= .
                                    502 	.globl	XG$setAnimation$0$0
      0001BF C9               [10]  503 	ret
                           0001C0   504 	G$forceReload$0$0	= .
                                    505 	.globl	G$forceReload$0$0
                           0001C0   506 	C$spriteengine.c$48$1_0$107	= .
                                    507 	.globl	C$spriteengine.c$48$1_0$107
                                    508 ;spriteengine.c:48: void forceReload(unsigned char entitynumber) {
                                    509 ;	---------------------------------
                                    510 ; Function forceReload
                                    511 ; ---------------------------------
      0001C0                        512 _forceReload::
      0001C0 DD E5            [15]  513 	push	ix
      0001C2 DD 21 00 00      [14]  514 	ld	ix,#0
      0001C6 DD 39            [15]  515 	add	ix,sp
                           0001C8   516 	C$spriteengine.c$49$1_0$107	= .
                                    517 	.globl	C$spriteengine.c$49$1_0$107
                                    518 ;spriteengine.c:49: entitylist[entitynumber]->has2ReloadTiles = true;
      0001C8 01r00r00         [10]  519 	ld	bc, #_entitylist+0
      0001CB DD 6E 04         [19]  520 	ld	l, 4 (ix)
      0001CE 26 00            [ 7]  521 	ld	h, #0x00
      0001D0 29               [11]  522 	add	hl, hl
      0001D1 09               [11]  523 	add	hl, bc
      0001D2 4E               [ 7]  524 	ld	c, (hl)
      0001D3 23               [ 6]  525 	inc	hl
      0001D4 46               [ 7]  526 	ld	b, (hl)
      0001D5 21 0B 00         [10]  527 	ld	hl, #0x000b
      0001D8 09               [11]  528 	add	hl, bc
      0001D9 36 01            [10]  529 	ld	(hl), #0x01
                           0001DB   530 	C$spriteengine.c$50$1_0$107	= .
                                    531 	.globl	C$spriteengine.c$50$1_0$107
                                    532 ;spriteengine.c:50: }
      0001DB DD E1            [14]  533 	pop	ix
                           0001DD   534 	C$spriteengine.c$50$1_0$107	= .
                                    535 	.globl	C$spriteengine.c$50$1_0$107
                           0001DD   536 	XG$forceReload$0$0	= .
                                    537 	.globl	XG$forceReload$0$0
      0001DD C9               [10]  538 	ret
                           0001DE   539 	G$isFrameEnded$0$0	= .
                                    540 	.globl	G$isFrameEnded$0$0
                           0001DE   541 	C$spriteengine.c$52$1_0$109	= .
                                    542 	.globl	C$spriteengine.c$52$1_0$109
                                    543 ;spriteengine.c:52: bool isFrameEnded(unsigned char entitynumber) {
                                    544 ;	---------------------------------
                                    545 ; Function isFrameEnded
                                    546 ; ---------------------------------
      0001DE                        547 _isFrameEnded::
      0001DE DD E5            [15]  548 	push	ix
      0001E0 DD 21 00 00      [14]  549 	ld	ix,#0
      0001E4 DD 39            [15]  550 	add	ix,sp
                           0001E6   551 	C$spriteengine.c$53$1_0$109	= .
                                    552 	.globl	C$spriteengine.c$53$1_0$109
                                    553 ;spriteengine.c:53: return entitylist[entitynumber]->frameEnded;
      0001E6 DD 6E 04         [19]  554 	ld	l, 4 (ix)
      0001E9 26 00            [ 7]  555 	ld	h, #0x00
      0001EB 29               [11]  556 	add	hl, hl
      0001EC 11r00r00         [10]  557 	ld	de, #_entitylist
      0001EF 19               [11]  558 	add	hl, de
      0001F0 4E               [ 7]  559 	ld	c, (hl)
      0001F1 23               [ 6]  560 	inc	hl
      0001F2 46               [ 7]  561 	ld	b, (hl)
      0001F3 21 0D 00         [10]  562 	ld	hl, #13
      0001F6 09               [11]  563 	add	hl, bc
      0001F7 6E               [ 7]  564 	ld	l, (hl)
                           0001F8   565 	C$spriteengine.c$54$1_0$109	= .
                                    566 	.globl	C$spriteengine.c$54$1_0$109
                                    567 ;spriteengine.c:54: }
      0001F8 DD E1            [14]  568 	pop	ix
                           0001FA   569 	C$spriteengine.c$54$1_0$109	= .
                                    570 	.globl	C$spriteengine.c$54$1_0$109
                           0001FA   571 	XG$isFrameEnded$0$0	= .
                                    572 	.globl	XG$isFrameEnded$0$0
      0001FA C9               [10]  573 	ret
                           0001FB   574 	G$isAnimationEnded$0$0	= .
                                    575 	.globl	G$isAnimationEnded$0$0
                           0001FB   576 	C$spriteengine.c$56$1_0$111	= .
                                    577 	.globl	C$spriteengine.c$56$1_0$111
                                    578 ;spriteengine.c:56: bool isAnimationEnded(unsigned char entitynumber) {
                                    579 ;	---------------------------------
                                    580 ; Function isAnimationEnded
                                    581 ; ---------------------------------
      0001FB                        582 _isAnimationEnded::
      0001FB DD E5            [15]  583 	push	ix
      0001FD DD 21 00 00      [14]  584 	ld	ix,#0
      000201 DD 39            [15]  585 	add	ix,sp
                           000203   586 	C$spriteengine.c$57$1_0$111	= .
                                    587 	.globl	C$spriteengine.c$57$1_0$111
                                    588 ;spriteengine.c:57: return entitylist[entitynumber]->animationEnded;
      000203 DD 6E 04         [19]  589 	ld	l, 4 (ix)
      000206 26 00            [ 7]  590 	ld	h, #0x00
      000208 29               [11]  591 	add	hl, hl
      000209 11r00r00         [10]  592 	ld	de, #_entitylist
      00020C 19               [11]  593 	add	hl, de
      00020D 4E               [ 7]  594 	ld	c, (hl)
      00020E 23               [ 6]  595 	inc	hl
      00020F 46               [ 7]  596 	ld	b, (hl)
      000210 21 0C 00         [10]  597 	ld	hl, #12
      000213 09               [11]  598 	add	hl, bc
      000214 6E               [ 7]  599 	ld	l, (hl)
                           000215   600 	C$spriteengine.c$58$1_0$111	= .
                                    601 	.globl	C$spriteengine.c$58$1_0$111
                                    602 ;spriteengine.c:58: }
      000215 DD E1            [14]  603 	pop	ix
                           000217   604 	C$spriteengine.c$58$1_0$111	= .
                                    605 	.globl	C$spriteengine.c$58$1_0$111
                           000217   606 	XG$isAnimationEnded$0$0	= .
                                    607 	.globl	XG$isAnimationEnded$0$0
      000217 C9               [10]  608 	ret
                           000218   609 	G$setDirection$0$0	= .
                                    610 	.globl	G$setDirection$0$0
                           000218   611 	C$spriteengine.c$60$1_0$113	= .
                                    612 	.globl	C$spriteengine.c$60$1_0$113
                                    613 ;spriteengine.c:60: void setDirection(unsigned char entitynumber, unsigned char direction) {
                                    614 ;	---------------------------------
                                    615 ; Function setDirection
                                    616 ; ---------------------------------
      000218                        617 _setDirection::
      000218 DD E5            [15]  618 	push	ix
      00021A DD 21 00 00      [14]  619 	ld	ix,#0
      00021E DD 39            [15]  620 	add	ix,sp
                           000220   621 	C$spriteengine.c$61$1_0$113	= .
                                    622 	.globl	C$spriteengine.c$61$1_0$113
                                    623 ;spriteengine.c:61: entitylist[entitynumber]->direction = direction;
      000220 01r00r00         [10]  624 	ld	bc, #_entitylist+0
      000223 DD 6E 04         [19]  625 	ld	l, 4 (ix)
      000226 26 00            [ 7]  626 	ld	h, #0x00
      000228 29               [11]  627 	add	hl, hl
      000229 09               [11]  628 	add	hl, bc
      00022A 5D               [ 4]  629 	ld	e, l
      00022B 54               [ 4]  630 	ld	d, h
      00022C 4E               [ 7]  631 	ld	c, (hl)
      00022D 23               [ 6]  632 	inc	hl
      00022E 46               [ 7]  633 	ld	b, (hl)
      00022F 21 05 00         [10]  634 	ld	hl, #0x0005
      000232 09               [11]  635 	add	hl, bc
      000233 DD 7E 05         [19]  636 	ld	a, 5 (ix)
      000236 77               [ 7]  637 	ld	(hl), a
                           000237   638 	C$spriteengine.c$62$1_0$113	= .
                                    639 	.globl	C$spriteengine.c$62$1_0$113
                                    640 ;spriteengine.c:62: entitylist[entitynumber]->has2ReloadTiles = true;
      000237 EB               [ 4]  641 	ex	de,hl
      000238 4E               [ 7]  642 	ld	c, (hl)
      000239 23               [ 6]  643 	inc	hl
      00023A 46               [ 7]  644 	ld	b, (hl)
      00023B 21 0B 00         [10]  645 	ld	hl, #0x000b
      00023E 09               [11]  646 	add	hl, bc
      00023F 36 01            [10]  647 	ld	(hl), #0x01
                           000241   648 	C$spriteengine.c$63$1_0$113	= .
                                    649 	.globl	C$spriteengine.c$63$1_0$113
                                    650 ;spriteengine.c:63: }
      000241 DD E1            [14]  651 	pop	ix
                           000243   652 	C$spriteengine.c$63$1_0$113	= .
                                    653 	.globl	C$spriteengine.c$63$1_0$113
                           000243   654 	XG$setDirection$0$0	= .
                                    655 	.globl	XG$setDirection$0$0
      000243 C9               [10]  656 	ret
                           000244   657 	G$updateAnimations$0$0	= .
                                    658 	.globl	G$updateAnimations$0$0
                           000244   659 	C$spriteengine.c$65$1_0$115	= .
                                    660 	.globl	C$spriteengine.c$65$1_0$115
                                    661 ;spriteengine.c:65: void updateAnimations() {
                                    662 ;	---------------------------------
                                    663 ; Function updateAnimations
                                    664 ; ---------------------------------
      000244                        665 _updateAnimations::
      000244 DD E5            [15]  666 	push	ix
      000246 DD 21 00 00      [14]  667 	ld	ix,#0
      00024A DD 39            [15]  668 	add	ix,sp
      00024C 21 F9 FF         [10]  669 	ld	hl, #-7
      00024F 39               [11]  670 	add	hl, sp
      000250 F9               [ 6]  671 	ld	sp, hl
                           000251   672 	C$spriteengine.c$67$3_0$116	= .
                                    673 	.globl	C$spriteengine.c$67$3_0$116
                                    674 ;spriteengine.c:67: for(i = 0;i < entityIndex; i++) {
      000251 01 00 00         [10]  675 	ld	bc, #0x0000
      000254                        676 00108$:
      000254 3Ar00r00         [13]  677 	ld	a, (#_entityIndex + 0)
      000257 5F               [ 4]  678 	ld	e, a
      000258 16 00            [ 7]  679 	ld	d, #0x00
      00025A 79               [ 4]  680 	ld	a, c
      00025B 93               [ 4]  681 	sub	a, e
      00025C 78               [ 4]  682 	ld	a, b
      00025D 9A               [ 4]  683 	sbc	a, d
      00025E E2r63r02         [10]  684 	jp	PO, 00133$
      000261 EE 80            [ 7]  685 	xor	a, #0x80
      000263                        686 00133$:
      000263 F2r9Cr03         [10]  687 	jp	P, 00110$
                           000266   688 	C$spriteengine.c$68$2_0$115	= .
                                    689 	.globl	C$spriteengine.c$68$2_0$115
                                    690 ;spriteengine.c:68: entitylist[i]->framecnt++;
      000266 69               [ 4]  691 	ld	l, c
      000267 60               [ 4]  692 	ld	h, b
      000268 29               [11]  693 	add	hl, hl
      000269 7D               [ 4]  694 	ld	a, l
      00026A C6r00            [ 7]  695 	add	a, #<(_entitylist)
      00026C DD 77 F9         [19]  696 	ld	-7 (ix), a
      00026F 7C               [ 4]  697 	ld	a, h
      000270 CEs00            [ 7]  698 	adc	a, #>(_entitylist)
      000272 DD 77 FA         [19]  699 	ld	-6 (ix), a
      000275 E1               [10]  700 	pop	hl
      000276 E5               [11]  701 	push	hl
      000277 5E               [ 7]  702 	ld	e, (hl)
      000278 23               [ 6]  703 	inc	hl
      000279 56               [ 7]  704 	ld	d, (hl)
      00027A 21 08 00         [10]  705 	ld	hl, #0x0008
      00027D 19               [11]  706 	add	hl, de
      00027E 34               [11]  707 	inc	(hl)
                           00027F   708 	C$spriteengine.c$69$3_0$116	= .
                                    709 	.globl	C$spriteengine.c$69$3_0$116
                                    710 ;spriteengine.c:69: if(entitylist[i]->framecnt > entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].frame_time){
      00027F E1               [10]  711 	pop	hl
      000280 E5               [11]  712 	push	hl
      000281 7E               [ 7]  713 	ld	a, (hl)
      000282 DD 77 FD         [19]  714 	ld	-3 (ix), a
      000285 23               [ 6]  715 	inc	hl
      000286 7E               [ 7]  716 	ld	a, (hl)
      000287 DD 77 FE         [19]  717 	ld	-2 (ix), a
      00028A DD 5E FD         [19]  718 	ld	e, -3 (ix)
      00028D DD 56 FE         [19]  719 	ld	d, -2 (ix)
      000290 21 08 00         [10]  720 	ld	hl, #8
      000293 19               [11]  721 	add	hl, de
      000294 7E               [ 7]  722 	ld	a, (hl)
      000295 DD 77 FF         [19]  723 	ld	-1 (ix), a
      000298 DD 6E FD         [19]  724 	ld	l, -3 (ix)
      00029B DD 66 FE         [19]  725 	ld	h, -2 (ix)
      00029E 5E               [ 7]  726 	ld	e, (hl)
      00029F 23               [ 6]  727 	inc	hl
      0002A0 56               [ 7]  728 	ld	d, (hl)
      0002A1 13               [ 6]  729 	inc	de
      0002A2 13               [ 6]  730 	inc	de
      0002A3 DD 6E FD         [19]  731 	ld	l, -3 (ix)
      0002A6 DD 66 FE         [19]  732 	ld	h, -2 (ix)
      0002A9 C5               [11]  733 	push	bc
      0002AA 01 06 00         [10]  734 	ld	bc, #0x0006
      0002AD 09               [11]  735 	add	hl, bc
      0002AE C1               [10]  736 	pop	bc
      0002AF 6E               [ 7]  737 	ld	l, (hl)
      0002B0 26 00            [ 7]  738 	ld	h, #0x00
      0002B2 D5               [11]  739 	push	de
      0002B3 5D               [ 4]  740 	ld	e, l
      0002B4 54               [ 4]  741 	ld	d, h
      0002B5 29               [11]  742 	add	hl, hl
      0002B6 29               [11]  743 	add	hl, hl
      0002B7 19               [11]  744 	add	hl, de
      0002B8 29               [11]  745 	add	hl, hl
      0002B9 29               [11]  746 	add	hl, hl
      0002BA 29               [11]  747 	add	hl, hl
      0002BB 29               [11]  748 	add	hl, hl
      0002BC 19               [11]  749 	add	hl, de
      0002BD 29               [11]  750 	add	hl, hl
      0002BE 19               [11]  751 	add	hl, de
      0002BF 29               [11]  752 	add	hl, hl
      0002C0 29               [11]  753 	add	hl, hl
      0002C1 D1               [10]  754 	pop	de
      0002C2 19               [11]  755 	add	hl, de
      0002C3 EB               [ 4]  756 	ex	de, hl
      0002C4 13               [ 6]  757 	inc	de
      0002C5 13               [ 6]  758 	inc	de
      0002C6 DD 6E FD         [19]  759 	ld	l, -3 (ix)
      0002C9 DD 66 FE         [19]  760 	ld	h, -2 (ix)
      0002CC C5               [11]  761 	push	bc
      0002CD 01 07 00         [10]  762 	ld	bc, #0x0007
      0002D0 09               [11]  763 	add	hl, bc
      0002D1 C1               [10]  764 	pop	bc
      0002D2 7E               [ 7]  765 	ld	a, (hl)
      0002D3 D5               [11]  766 	push	de
      0002D4 5F               [ 4]  767 	ld	e, a
      0002D5 16 00            [ 7]  768 	ld	d, #0x00
      0002D7 6B               [ 4]  769 	ld	l, e
      0002D8 62               [ 4]  770 	ld	h, d
      0002D9 29               [11]  771 	add	hl, hl
      0002DA 29               [11]  772 	add	hl, hl
      0002DB 29               [11]  773 	add	hl, hl
      0002DC 29               [11]  774 	add	hl, hl
      0002DD 29               [11]  775 	add	hl, hl
      0002DE 29               [11]  776 	add	hl, hl
      0002DF 19               [11]  777 	add	hl, de
      0002E0 D1               [10]  778 	pop	de
      0002E1 19               [11]  779 	add	hl, de
      0002E2 11 08 00         [10]  780 	ld	de, #0x0008
      0002E5 19               [11]  781 	add	hl, de
      0002E6 7E               [ 7]  782 	ld	a, (hl)
      0002E7 DD 96 FF         [19]  783 	sub	a, -1 (ix)
      0002EA D2r98r03         [10]  784 	jp	NC, 00109$
                           0002ED   785 	C$spriteengine.c$70$4_0$117	= .
                                    786 	.globl	C$spriteengine.c$70$4_0$117
                                    787 ;spriteengine.c:70: entitylist[i]->frameEnded = true;
      0002ED DD 6E FD         [19]  788 	ld	l, -3 (ix)
      0002F0 DD 66 FE         [19]  789 	ld	h, -2 (ix)
      0002F3 11 0D 00         [10]  790 	ld	de, #0x000d
      0002F6 19               [11]  791 	add	hl, de
      0002F7 36 01            [10]  792 	ld	(hl), #0x01
                           0002F9   793 	C$spriteengine.c$71$4_0$117	= .
                                    794 	.globl	C$spriteengine.c$71$4_0$117
                                    795 ;spriteengine.c:71: if(entitylist[i]->currentFrame < entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].numframes - 1) { //tenir en compte els mirrored!
      0002F9 E1               [10]  796 	pop	hl
      0002FA E5               [11]  797 	push	hl
      0002FB 7E               [ 7]  798 	ld	a, (hl)
      0002FC DD 77 FB         [19]  799 	ld	-5 (ix), a
      0002FF 23               [ 6]  800 	inc	hl
      000300 7E               [ 7]  801 	ld	a, (hl)
      000301 DD 77 FC         [19]  802 	ld	-4 (ix), a
      000304 DD 7E FB         [19]  803 	ld	a, -5 (ix)
      000307 C6 07            [ 7]  804 	add	a, #0x07
      000309 DD 77 FD         [19]  805 	ld	-3 (ix), a
      00030C DD 7E FC         [19]  806 	ld	a, -4 (ix)
      00030F CE 00            [ 7]  807 	adc	a, #0x00
      000311 DD 77 FE         [19]  808 	ld	-2 (ix), a
      000314 DD 6E FD         [19]  809 	ld	l, -3 (ix)
      000317 DD 66 FE         [19]  810 	ld	h, -2 (ix)
      00031A 7E               [ 7]  811 	ld	a, (hl)
      00031B DD 77 FF         [19]  812 	ld	-1 (ix), a
      00031E DD 6E FB         [19]  813 	ld	l, -5 (ix)
      000321 DD 66 FC         [19]  814 	ld	h, -4 (ix)
      000324 5E               [ 7]  815 	ld	e, (hl)
      000325 23               [ 6]  816 	inc	hl
      000326 56               [ 7]  817 	ld	d, (hl)
      000327 13               [ 6]  818 	inc	de
      000328 13               [ 6]  819 	inc	de
      000329 DD 6E FB         [19]  820 	ld	l, -5 (ix)
      00032C DD 66 FC         [19]  821 	ld	h, -4 (ix)
      00032F C5               [11]  822 	push	bc
      000330 01 06 00         [10]  823 	ld	bc, #0x0006
      000333 09               [11]  824 	add	hl, bc
      000334 C1               [10]  825 	pop	bc
      000335 6E               [ 7]  826 	ld	l, (hl)
      000336 26 00            [ 7]  827 	ld	h, #0x00
      000338 D5               [11]  828 	push	de
      000339 5D               [ 4]  829 	ld	e, l
      00033A 54               [ 4]  830 	ld	d, h
      00033B 29               [11]  831 	add	hl, hl
      00033C 29               [11]  832 	add	hl, hl
      00033D 19               [11]  833 	add	hl, de
      00033E 29               [11]  834 	add	hl, hl
      00033F 29               [11]  835 	add	hl, hl
      000340 29               [11]  836 	add	hl, hl
      000341 29               [11]  837 	add	hl, hl
      000342 19               [11]  838 	add	hl, de
      000343 29               [11]  839 	add	hl, hl
      000344 19               [11]  840 	add	hl, de
      000345 29               [11]  841 	add	hl, hl
      000346 29               [11]  842 	add	hl, hl
      000347 D1               [10]  843 	pop	de
      000348 19               [11]  844 	add	hl, de
      000349 23               [ 6]  845 	inc	hl
      00034A 5E               [ 7]  846 	ld	e, (hl)
      00034B 16 00            [ 7]  847 	ld	d, #0x00
      00034D 1B               [ 6]  848 	dec	de
      00034E DD 7E FF         [19]  849 	ld	a, -1 (ix)
      000351 26 00            [ 7]  850 	ld	h, #0x00
      000353 93               [ 4]  851 	sub	a, e
      000354 7C               [ 4]  852 	ld	a, h
      000355 9A               [ 4]  853 	sbc	a, d
      000356 E2r5Br03         [10]  854 	jp	PO, 00134$
      000359 EE 80            [ 7]  855 	xor	a, #0x80
      00035B                        856 00134$:
      00035B F2r76r03         [10]  857 	jp	P, 00102$
                           00035E   858 	C$spriteengine.c$72$5_0$118	= .
                                    859 	.globl	C$spriteengine.c$72$5_0$118
                                    860 ;spriteengine.c:72: entitylist[i]->currentFrame++;
      00035E DD 7E FF         [19]  861 	ld	a, -1 (ix)
      000361 3C               [ 4]  862 	inc	a
      000362 DD 6E FD         [19]  863 	ld	l, -3 (ix)
      000365 DD 66 FE         [19]  864 	ld	h, -2 (ix)
      000368 77               [ 7]  865 	ld	(hl), a
                           000369   866 	C$spriteengine.c$73$5_0$118	= .
                                    867 	.globl	C$spriteengine.c$73$5_0$118
                                    868 ;spriteengine.c:73: entitylist[i]->has2ReloadTiles = true;
      000369 E1               [10]  869 	pop	hl
      00036A E5               [11]  870 	push	hl
      00036B 5E               [ 7]  871 	ld	e, (hl)
      00036C 23               [ 6]  872 	inc	hl
      00036D 56               [ 7]  873 	ld	d, (hl)
      00036E 21 0B 00         [10]  874 	ld	hl, #0x000b
      000371 19               [11]  875 	add	hl, de
      000372 36 01            [10]  876 	ld	(hl), #0x01
      000374 18 17            [12]  877 	jr	00103$
      000376                        878 00102$:
                           000376   879 	C$spriteengine.c$75$5_0$119	= .
                                    880 	.globl	C$spriteengine.c$75$5_0$119
                                    881 ;spriteengine.c:75: entitylist[i]->animationEnded = true;
      000376 DD 6E FB         [19]  882 	ld	l, -5 (ix)
      000379 DD 66 FC         [19]  883 	ld	h, -4 (ix)
      00037C 11 0C 00         [10]  884 	ld	de, #0x000c
      00037F 19               [11]  885 	add	hl, de
      000380 36 01            [10]  886 	ld	(hl), #0x01
                           000382   887 	C$spriteengine.c$76$5_0$119	= .
                                    888 	.globl	C$spriteengine.c$76$5_0$119
                                    889 ;spriteengine.c:76: entitylist[i]->currentFrame = 0;
      000382 E1               [10]  890 	pop	hl
      000383 E5               [11]  891 	push	hl
      000384 5E               [ 7]  892 	ld	e, (hl)
      000385 23               [ 6]  893 	inc	hl
      000386 56               [ 7]  894 	ld	d, (hl)
      000387 21 07 00         [10]  895 	ld	hl, #0x0007
      00038A 19               [11]  896 	add	hl, de
      00038B 36 00            [10]  897 	ld	(hl), #0x00
      00038D                        898 00103$:
                           00038D   899 	C$spriteengine.c$78$4_0$117	= .
                                    900 	.globl	C$spriteengine.c$78$4_0$117
                                    901 ;spriteengine.c:78: entitylist[i]->framecnt = 0;
      00038D E1               [10]  902 	pop	hl
      00038E E5               [11]  903 	push	hl
      00038F 5E               [ 7]  904 	ld	e, (hl)
      000390 23               [ 6]  905 	inc	hl
      000391 56               [ 7]  906 	ld	d, (hl)
      000392 21 08 00         [10]  907 	ld	hl, #0x0008
      000395 19               [11]  908 	add	hl, de
      000396 36 00            [10]  909 	ld	(hl), #0x00
      000398                        910 00109$:
                           000398   911 	C$spriteengine.c$67$2_0$115	= .
                                    912 	.globl	C$spriteengine.c$67$2_0$115
                                    913 ;spriteengine.c:67: for(i = 0;i < entityIndex; i++) {
      000398 03               [ 6]  914 	inc	bc
      000399 C3r54r02         [10]  915 	jp	00108$
      00039C                        916 00110$:
                           00039C   917 	C$spriteengine.c$81$2_0$115	= .
                                    918 	.globl	C$spriteengine.c$81$2_0$115
                                    919 ;spriteengine.c:81: }
      00039C DD F9            [10]  920 	ld	sp, ix
      00039E DD E1            [14]  921 	pop	ix
                           0003A0   922 	C$spriteengine.c$81$2_0$115	= .
                                    923 	.globl	C$spriteengine.c$81$2_0$115
                           0003A0   924 	XG$updateAnimations$0$0	= .
                                    925 	.globl	XG$updateAnimations$0$0
      0003A0 C9               [10]  926 	ret
                           0003A1   927 	G$updateTiles$0$0	= .
                                    928 	.globl	G$updateTiles$0$0
                           0003A1   929 	C$spriteengine.c$83$2_0$121	= .
                                    930 	.globl	C$spriteengine.c$83$2_0$121
                                    931 ;spriteengine.c:83: void updateTiles() {
                                    932 ;	---------------------------------
                                    933 ; Function updateTiles
                                    934 ; ---------------------------------
      0003A1                        935 _updateTiles::
      0003A1 DD E5            [15]  936 	push	ix
      0003A3 DD 21 00 00      [14]  937 	ld	ix,#0
      0003A7 DD 39            [15]  938 	add	ix,sp
      0003A9 21 F4 FF         [10]  939 	ld	hl, #-12
      0003AC 39               [11]  940 	add	hl, sp
      0003AD F9               [ 6]  941 	ld	sp, hl
                           0003AE   942 	C$spriteengine.c$85$3_0$122	= .
                                    943 	.globl	C$spriteengine.c$85$3_0$122
                                    944 ;spriteengine.c:85: for(i = 0;i < entityIndex; i++) {
      0003AE AF               [ 4]  945 	xor	a, a
      0003AF DD 77 FE         [19]  946 	ld	-2 (ix), a
      0003B2 DD 77 FF         [19]  947 	ld	-1 (ix), a
      0003B5                        948 00108$:
      0003B5 3Ar00r00         [13]  949 	ld	a, (#_entityIndex + 0)
      0003B8 4F               [ 4]  950 	ld	c, a
      0003B9 06 00            [ 7]  951 	ld	b, #0x00
      0003BB DD 7E FE         [19]  952 	ld	a, -2 (ix)
      0003BE 91               [ 4]  953 	sub	a, c
      0003BF DD 7E FF         [19]  954 	ld	a, -1 (ix)
      0003C2 98               [ 4]  955 	sbc	a, b
      0003C3 E2rC8r03         [10]  956 	jp	PO, 00133$
      0003C6 EE 80            [ 7]  957 	xor	a, #0x80
      0003C8                        958 00133$:
      0003C8 F2r5Cr06         [10]  959 	jp	P, 00110$
                           0003CB   960 	C$spriteengine.c$86$2_0$121	= .
                                    961 	.globl	C$spriteengine.c$86$2_0$121
                                    962 ;spriteengine.c:86: if(entitylist[i]->has2ReloadTiles) {	
      0003CB DD 7E FE         [19]  963 	ld	a, -2 (ix)
      0003CE DD 77 FC         [19]  964 	ld	-4 (ix), a
      0003D1 DD 7E FF         [19]  965 	ld	a, -1 (ix)
      0003D4 DD 77 FD         [19]  966 	ld	-3 (ix), a
      0003D7 DD CB FC 26      [23]  967 	sla	-4 (ix)
      0003DB DD CB FD 16      [23]  968 	rl	-3 (ix)
      0003DF DD 7E FC         [19]  969 	ld	a, -4 (ix)
      0003E2 C6r00            [ 7]  970 	add	a, #<(_entitylist)
      0003E4 DD 77 F4         [19]  971 	ld	-12 (ix), a
      0003E7 DD 7E FD         [19]  972 	ld	a, -3 (ix)
      0003EA CEs00            [ 7]  973 	adc	a, #>(_entitylist)
      0003EC DD 77 F5         [19]  974 	ld	-11 (ix), a
      0003EF E1               [10]  975 	pop	hl
      0003F0 E5               [11]  976 	push	hl
      0003F1 7E               [ 7]  977 	ld	a, (hl)
      0003F2 DD 77 FA         [19]  978 	ld	-6 (ix), a
      0003F5 23               [ 6]  979 	inc	hl
      0003F6 7E               [ 7]  980 	ld	a, (hl)
      0003F7 DD 77 FB         [19]  981 	ld	-5 (ix), a
      0003FA DD 4E FA         [19]  982 	ld	c, -6 (ix)
      0003FD DD 46 FB         [19]  983 	ld	b, -5 (ix)
      000400 21 0B 00         [10]  984 	ld	hl, #11
      000403 09               [11]  985 	add	hl, bc
      000404 CB 46            [12]  986 	bit	0, (hl)
      000406 CAr50r06         [10]  987 	jp	Z, 00109$
                           000409   988 	C$spriteengine.c$87$4_0$123	= .
                                    989 	.globl	C$spriteengine.c$87$4_0$123
                                    990 ;spriteengine.c:87: if(entitylist[i]->direction == RIGHT_DIRECTION) {
      000409 DD 4E FA         [19]  991 	ld	c, -6 (ix)
      00040C DD 46 FB         [19]  992 	ld	b, -5 (ix)
      00040F 21 05 00         [10]  993 	ld	hl, #5
      000412 09               [11]  994 	add	hl, bc
      000413 7E               [ 7]  995 	ld	a, (hl)
      000414 DD 77 FC         [19]  996 	ld	-4 (ix), a
                           000417   997 	C$spriteengine.c$88$2_0$121	= .
                                    998 	.globl	C$spriteengine.c$88$2_0$121
                                    999 ;spriteengine.c:88: SMS_mapROMBank(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tile_bank);
      000417 DD 6E FA         [19] 1000 	ld	l, -6 (ix)
      00041A DD 66 FB         [19] 1001 	ld	h, -5 (ix)
      00041D 4E               [ 7] 1002 	ld	c, (hl)
      00041E 23               [ 6] 1003 	inc	hl
      00041F 46               [ 7] 1004 	ld	b, (hl)
      000420 DD 6E FA         [19] 1005 	ld	l, -6 (ix)
      000423 DD 66 FB         [19] 1006 	ld	h, -5 (ix)
      000426 DD 5E FA         [19] 1007 	ld	e, -6 (ix)
      000429 DD 56 FB         [19] 1008 	ld	d, -5 (ix)
      00042C 03               [ 6] 1009 	inc	bc
      00042D 03               [ 6] 1010 	inc	bc
      00042E DD 71 FA         [19] 1011 	ld	-6 (ix), c
      000431 DD 70 FB         [19] 1012 	ld	-5 (ix), b
      000434 01 06 00         [10] 1013 	ld	bc, #0x0006
      000437 09               [11] 1014 	add	hl, bc
      000438 4E               [ 7] 1015 	ld	c, (hl)
      000439 21 07 00         [10] 1016 	ld	hl, #7
      00043C 19               [11] 1017 	add	hl, de
      00043D 5E               [ 7] 1018 	ld	e, (hl)
      00043E 06 00            [ 7] 1019 	ld	b, #0x00
      000440 16 00            [ 7] 1020 	ld	d, #0x00
      000442 6B               [ 4] 1021 	ld	l, e
      000443 62               [ 4] 1022 	ld	h, d
      000444 29               [11] 1023 	add	hl, hl
      000445 29               [11] 1024 	add	hl, hl
      000446 29               [11] 1025 	add	hl, hl
      000447 29               [11] 1026 	add	hl, hl
      000448 29               [11] 1027 	add	hl, hl
      000449 29               [11] 1028 	add	hl, hl
      00044A 19               [11] 1029 	add	hl, de
      00044B EB               [ 4] 1030 	ex	de, hl
      00044C 69               [ 4] 1031 	ld	l, c
      00044D 60               [ 4] 1032 	ld	h, b
      00044E 29               [11] 1033 	add	hl, hl
      00044F 29               [11] 1034 	add	hl, hl
      000450 09               [11] 1035 	add	hl, bc
      000451 29               [11] 1036 	add	hl, hl
      000452 29               [11] 1037 	add	hl, hl
      000453 29               [11] 1038 	add	hl, hl
      000454 29               [11] 1039 	add	hl, hl
      000455 09               [11] 1040 	add	hl, bc
      000456 29               [11] 1041 	add	hl, hl
      000457 09               [11] 1042 	add	hl, bc
      000458 29               [11] 1043 	add	hl, hl
      000459 29               [11] 1044 	add	hl, hl
      00045A DD 4E FA         [19] 1045 	ld	c, -6 (ix)
      00045D DD 46 FB         [19] 1046 	ld	b, -5 (ix)
      000460 09               [11] 1047 	add	hl, bc
      000461 23               [ 6] 1048 	inc	hl
      000462 23               [ 6] 1049 	inc	hl
      000463 19               [11] 1050 	add	hl, de
      000464 11 07 00         [10] 1051 	ld	de, #0x0007
      000467 19               [11] 1052 	add	hl, de
      000468 7E               [ 7] 1053 	ld	a, (hl)
      000469 DD 77 FD         [19] 1054 	ld	-3 (ix), a
                           00046C  1055 	C$spriteengine.c$87$4_0$123	= .
                                   1056 	.globl	C$spriteengine.c$87$4_0$123
                                   1057 ;spriteengine.c:87: if(entitylist[i]->direction == RIGHT_DIRECTION) {
      00046C DD 7E FC         [19] 1058 	ld	a, -4 (ix)
      00046F B7               [ 4] 1059 	or	a, a
      000470 C2rF1r04         [10] 1060 	jp	NZ, 00102$
                           000473  1061 	C$spriteengine.c$88$5_0$124	= .
                                   1062 	.globl	C$spriteengine.c$88$5_0$124
                                   1063 ;spriteengine.c:88: SMS_mapROMBank(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tile_bank);
      000473 DD 7E FD         [19] 1064 	ld	a, -3 (ix)
      000476 32 FF FF         [13] 1065 	ld	(#_ROM_bank_to_be_mapped_on_slot2),a
                           000479  1066 	C$spriteengine.c$86$2_0$121	= .
                                   1067 	.globl	C$spriteengine.c$86$2_0$121
                                   1068 ;spriteengine.c:86: if(entitylist[i]->has2ReloadTiles) {	
      000479 E1               [10] 1069 	pop	hl
      00047A E5               [11] 1070 	push	hl
      00047B 4E               [ 7] 1071 	ld	c, (hl)
      00047C 23               [ 6] 1072 	inc	hl
      00047D 46               [ 7] 1073 	ld	b, (hl)
                           00047E  1074 	C$spriteengine.c$89$2_0$121	= .
                                   1075 	.globl	C$spriteengine.c$89$2_0$121
                                   1076 ;spriteengine.c:89: SMS_loadTiles(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tiles, entitylist[i]->vramposition, entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tile_bin_size);	
      00047E 69               [ 4] 1077 	ld	l, c
      00047F 60               [ 4] 1078 	ld	h, b
      000480 5E               [ 7] 1079 	ld	e, (hl)
      000481 23               [ 6] 1080 	inc	hl
      000482 56               [ 7] 1081 	ld	d, (hl)
      000483 13               [ 6] 1082 	inc	de
      000484 13               [ 6] 1083 	inc	de
      000485 69               [ 4] 1084 	ld	l, c
      000486 60               [ 4] 1085 	ld	h, b
      000487 C5               [11] 1086 	push	bc
      000488 01 06 00         [10] 1087 	ld	bc, #0x0006
      00048B 09               [11] 1088 	add	hl, bc
      00048C C1               [10] 1089 	pop	bc
      00048D 6E               [ 7] 1090 	ld	l, (hl)
      00048E 26 00            [ 7] 1091 	ld	h, #0x00
      000490 D5               [11] 1092 	push	de
      000491 5D               [ 4] 1093 	ld	e, l
      000492 54               [ 4] 1094 	ld	d, h
      000493 29               [11] 1095 	add	hl, hl
      000494 29               [11] 1096 	add	hl, hl
      000495 19               [11] 1097 	add	hl, de
      000496 29               [11] 1098 	add	hl, hl
      000497 29               [11] 1099 	add	hl, hl
      000498 29               [11] 1100 	add	hl, hl
      000499 29               [11] 1101 	add	hl, hl
      00049A 19               [11] 1102 	add	hl, de
      00049B 29               [11] 1103 	add	hl, hl
      00049C 19               [11] 1104 	add	hl, de
      00049D 29               [11] 1105 	add	hl, hl
      00049E 29               [11] 1106 	add	hl, hl
      00049F D1               [10] 1107 	pop	de
      0004A0 19               [11] 1108 	add	hl, de
      0004A1 EB               [ 4] 1109 	ex	de, hl
      0004A2 13               [ 6] 1110 	inc	de
      0004A3 13               [ 6] 1111 	inc	de
      0004A4 69               [ 4] 1112 	ld	l, c
      0004A5 60               [ 4] 1113 	ld	h, b
      0004A6 C5               [11] 1114 	push	bc
      0004A7 01 07 00         [10] 1115 	ld	bc, #0x0007
      0004AA 09               [11] 1116 	add	hl, bc
      0004AB C1               [10] 1117 	pop	bc
      0004AC 7E               [ 7] 1118 	ld	a, (hl)
      0004AD D5               [11] 1119 	push	de
      0004AE 5F               [ 4] 1120 	ld	e, a
      0004AF 16 00            [ 7] 1121 	ld	d, #0x00
      0004B1 6B               [ 4] 1122 	ld	l, e
      0004B2 62               [ 4] 1123 	ld	h, d
      0004B3 29               [11] 1124 	add	hl, hl
      0004B4 29               [11] 1125 	add	hl, hl
      0004B5 29               [11] 1126 	add	hl, hl
      0004B6 29               [11] 1127 	add	hl, hl
      0004B7 29               [11] 1128 	add	hl, hl
      0004B8 29               [11] 1129 	add	hl, hl
      0004B9 19               [11] 1130 	add	hl, de
      0004BA D1               [10] 1131 	pop	de
      0004BB 19               [11] 1132 	add	hl, de
      0004BC 5D               [ 4] 1133 	ld	e, l
      0004BD 54               [ 4] 1134 	ld	d, h
      0004BE 23               [ 6] 1135 	inc	hl
      0004BF 23               [ 6] 1136 	inc	hl
      0004C0 23               [ 6] 1137 	inc	hl
      0004C1 23               [ 6] 1138 	inc	hl
      0004C2 23               [ 6] 1139 	inc	hl
      0004C3 7E               [ 7] 1140 	ld	a, (hl)
      0004C4 DD 77 FC         [19] 1141 	ld	-4 (ix), a
      0004C7 23               [ 6] 1142 	inc	hl
      0004C8 7E               [ 7] 1143 	ld	a, (hl)
      0004C9 DD 77 FD         [19] 1144 	ld	-3 (ix), a
      0004CC 21 03 00         [10] 1145 	ld	hl, #3
      0004CF 19               [11] 1146 	add	hl, de
      0004D0 5E               [ 7] 1147 	ld	e, (hl)
      0004D1 23               [ 6] 1148 	inc	hl
      0004D2 56               [ 7] 1149 	ld	d, (hl)
      0004D3 21 09 00         [10] 1150 	ld	hl, #9
      0004D6 09               [11] 1151 	add	hl, bc
      0004D7 7E               [ 7] 1152 	ld	a, (hl)
      0004D8 23               [ 6] 1153 	inc	hl
      0004D9 66               [ 7] 1154 	ld	h, (hl)
      0004DA 6F               [ 4] 1155 	ld	l, a
      0004DB 29               [11] 1156 	add	hl, hl
      0004DC 29               [11] 1157 	add	hl, hl
      0004DD 29               [11] 1158 	add	hl, hl
      0004DE 29               [11] 1159 	add	hl, hl
      0004DF 29               [11] 1160 	add	hl, hl
      0004E0 CB F4            [ 8] 1161 	set	6, h
      0004E2 DD 4E FC         [19] 1162 	ld	c, -4 (ix)
      0004E5 DD 46 FD         [19] 1163 	ld	b, -3 (ix)
      0004E8 C5               [11] 1164 	push	bc
      0004E9 D5               [11] 1165 	push	de
      0004EA E5               [11] 1166 	push	hl
      0004EB CDr00r00         [17] 1167 	call	_SMS_VRAMmemcpy
      0004EE C3r45r06         [10] 1168 	jp	00103$
      0004F1                       1169 00102$:
                           0004F1  1170 	C$spriteengine.c$91$5_0$125	= .
                                   1171 	.globl	C$spriteengine.c$91$5_0$125
                                   1172 ;spriteengine.c:91: SMS_mapROMBank(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tile_bank);
      0004F1 DD 7E FD         [19] 1173 	ld	a, -3 (ix)
      0004F4 32 FF FF         [13] 1174 	ld	(#_ROM_bank_to_be_mapped_on_slot2),a
                           0004F7  1175 	C$spriteengine.c$86$2_0$121	= .
                                   1176 	.globl	C$spriteengine.c$86$2_0$121
                                   1177 ;spriteengine.c:86: if(entitylist[i]->has2ReloadTiles) {	
      0004F7 E1               [10] 1178 	pop	hl
      0004F8 E5               [11] 1179 	push	hl
      0004F9 7E               [ 7] 1180 	ld	a, (hl)
      0004FA DD 77 FC         [19] 1181 	ld	-4 (ix), a
      0004FD 23               [ 6] 1182 	inc	hl
      0004FE 7E               [ 7] 1183 	ld	a, (hl)
      0004FF DD 77 FD         [19] 1184 	ld	-3 (ix), a
                           000502  1185 	C$spriteengine.c$89$2_0$121	= .
                                   1186 	.globl	C$spriteengine.c$89$2_0$121
                                   1187 ;spriteengine.c:89: SMS_loadTiles(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tiles, entitylist[i]->vramposition, entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tile_bin_size);	
      000502 DD 6E FC         [19] 1188 	ld	l, -4 (ix)
      000505 DD 66 FD         [19] 1189 	ld	h, -3 (ix)
      000508 7E               [ 7] 1190 	ld	a, (hl)
      000509 DD 77 FA         [19] 1191 	ld	-6 (ix), a
      00050C 23               [ 6] 1192 	inc	hl
      00050D 7E               [ 7] 1193 	ld	a, (hl)
      00050E DD 77 FB         [19] 1194 	ld	-5 (ix), a
      000511 DD 7E FA         [19] 1195 	ld	a, -6 (ix)
      000514 C6 02            [ 7] 1196 	add	a, #0x02
      000516 DD 77 F6         [19] 1197 	ld	-10 (ix), a
      000519 DD 7E FB         [19] 1198 	ld	a, -5 (ix)
      00051C CE 00            [ 7] 1199 	adc	a, #0x00
      00051E DD 77 F7         [19] 1200 	ld	-9 (ix), a
                           000521  1201 	C$spriteengine.c$92$5_0$125	= .
                                   1202 	.globl	C$spriteengine.c$92$5_0$125
                                   1203 ;spriteengine.c:92: SMS_loadTiles(entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].tiles, entitylist[i]->vramposition, entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].tile_bin_size);
      000521 DD 7E FC         [19] 1204 	ld	a, -4 (ix)
      000524 DD 77 FA         [19] 1205 	ld	-6 (ix), a
      000527 DD 7E FD         [19] 1206 	ld	a, -3 (ix)
      00052A DD 77 FB         [19] 1207 	ld	-5 (ix), a
      00052D DD 6E FA         [19] 1208 	ld	l, -6 (ix)
      000530 DD 66 FB         [19] 1209 	ld	h, -5 (ix)
      000533 11 06 00         [10] 1210 	ld	de, #0x0006
      000536 19               [11] 1211 	add	hl, de
      000537 7E               [ 7] 1212 	ld	a, (hl)
      000538 DD 77 FB         [19] 1213 	ld	-5 (ix), a
      00053B DD 77 FA         [19] 1214 	ld	-6 (ix), a
      00053E DD 36 FB 00      [19] 1215 	ld	-5 (ix), #0
      000542 4F               [ 4] 1216 	ld	c, a
      000543 06 00            [ 7] 1217 	ld	b, #0
      000545 69               [ 4] 1218 	ld	l, c
      000546 60               [ 4] 1219 	ld	h, b
      000547 29               [11] 1220 	add	hl, hl
      000548 29               [11] 1221 	add	hl, hl
      000549 09               [11] 1222 	add	hl, bc
      00054A 29               [11] 1223 	add	hl, hl
      00054B 29               [11] 1224 	add	hl, hl
      00054C 29               [11] 1225 	add	hl, hl
      00054D 29               [11] 1226 	add	hl, hl
      00054E 09               [11] 1227 	add	hl, bc
      00054F 29               [11] 1228 	add	hl, hl
      000550 09               [11] 1229 	add	hl, bc
      000551 29               [11] 1230 	add	hl, hl
      000552 29               [11] 1231 	add	hl, hl
      000553 DD 75 F8         [19] 1232 	ld	-8 (ix), l
      000556 DD 74 F9         [19] 1233 	ld	-7 (ix), h
      000559 DD 7E F6         [19] 1234 	ld	a, -10 (ix)
      00055C DD 86 F8         [19] 1235 	add	a, -8 (ix)
      00055F DD 77 FA         [19] 1236 	ld	-6 (ix), a
      000562 DD 7E F7         [19] 1237 	ld	a, -9 (ix)
      000565 DD 8E F9         [19] 1238 	adc	a, -7 (ix)
      000568 DD 77 FB         [19] 1239 	ld	-5 (ix), a
      00056B DD 7E FA         [19] 1240 	ld	a, -6 (ix)
      00056E C6 47            [ 7] 1241 	add	a, #0x47
      000570 DD 77 F6         [19] 1242 	ld	-10 (ix), a
      000573 DD 7E FB         [19] 1243 	ld	a, -5 (ix)
      000576 CE 01            [ 7] 1244 	adc	a, #0x01
      000578 DD 77 F7         [19] 1245 	ld	-9 (ix), a
      00057B DD 7E FC         [19] 1246 	ld	a, -4 (ix)
      00057E DD 77 FA         [19] 1247 	ld	-6 (ix), a
      000581 DD 7E FD         [19] 1248 	ld	a, -3 (ix)
      000584 DD 77 FB         [19] 1249 	ld	-5 (ix), a
      000587 DD 6E FA         [19] 1250 	ld	l, -6 (ix)
      00058A DD 66 FB         [19] 1251 	ld	h, -5 (ix)
      00058D 11 07 00         [10] 1252 	ld	de, #0x0007
      000590 19               [11] 1253 	add	hl, de
      000591 7E               [ 7] 1254 	ld	a, (hl)
      000592 DD 77 FB         [19] 1255 	ld	-5 (ix), a
      000595 4F               [ 4] 1256 	ld	c, a
      000596 06 00            [ 7] 1257 	ld	b, #0x00
      000598 69               [ 4] 1258 	ld	l, c
      000599 60               [ 4] 1259 	ld	h, b
      00059A 29               [11] 1260 	add	hl, hl
      00059B 29               [11] 1261 	add	hl, hl
      00059C 29               [11] 1262 	add	hl, hl
      00059D 29               [11] 1263 	add	hl, hl
      00059E 29               [11] 1264 	add	hl, hl
      00059F 29               [11] 1265 	add	hl, hl
      0005A0 09               [11] 1266 	add	hl, bc
      0005A1 DD 75 F8         [19] 1267 	ld	-8 (ix), l
      0005A4 DD 74 F9         [19] 1268 	ld	-7 (ix), h
      0005A7 DD 7E F6         [19] 1269 	ld	a, -10 (ix)
      0005AA DD 86 F8         [19] 1270 	add	a, -8 (ix)
      0005AD DD 77 FA         [19] 1271 	ld	-6 (ix), a
      0005B0 DD 7E F7         [19] 1272 	ld	a, -9 (ix)
      0005B3 DD 8E F9         [19] 1273 	adc	a, -7 (ix)
      0005B6 DD 77 FB         [19] 1274 	ld	-5 (ix), a
      0005B9 DD 7E FA         [19] 1275 	ld	a, -6 (ix)
      0005BC DD 77 F8         [19] 1276 	ld	-8 (ix), a
      0005BF DD 7E FB         [19] 1277 	ld	a, -5 (ix)
      0005C2 DD 77 F9         [19] 1278 	ld	-7 (ix), a
      0005C5 DD 6E F8         [19] 1279 	ld	l, -8 (ix)
      0005C8 DD 66 F9         [19] 1280 	ld	h, -7 (ix)
      0005CB 11 05 00         [10] 1281 	ld	de, #0x0005
      0005CE 19               [11] 1282 	add	hl, de
      0005CF 7E               [ 7] 1283 	ld	a, (hl)
      0005D0 DD 77 F6         [19] 1284 	ld	-10 (ix), a
      0005D3 23               [ 6] 1285 	inc	hl
      0005D4 7E               [ 7] 1286 	ld	a, (hl)
      0005D5 DD 77 F7         [19] 1287 	ld	-9 (ix), a
      0005D8 DD 6E FA         [19] 1288 	ld	l, -6 (ix)
      0005DB DD 66 FB         [19] 1289 	ld	h, -5 (ix)
      0005DE 23               [ 6] 1290 	inc	hl
      0005DF 23               [ 6] 1291 	inc	hl
      0005E0 23               [ 6] 1292 	inc	hl
      0005E1 7E               [ 7] 1293 	ld	a, (hl)
      0005E2 DD 77 FA         [19] 1294 	ld	-6 (ix), a
      0005E5 23               [ 6] 1295 	inc	hl
      0005E6 7E               [ 7] 1296 	ld	a, (hl)
      0005E7 DD 77 FB         [19] 1297 	ld	-5 (ix), a
      0005EA DD 7E FA         [19] 1298 	ld	a, -6 (ix)
      0005ED DD 77 F8         [19] 1299 	ld	-8 (ix), a
      0005F0 DD 7E FB         [19] 1300 	ld	a, -5 (ix)
      0005F3 DD 77 F9         [19] 1301 	ld	-7 (ix), a
      0005F6 DD 6E FC         [19] 1302 	ld	l, -4 (ix)
      0005F9 DD 66 FD         [19] 1303 	ld	h, -3 (ix)
      0005FC 11 09 00         [10] 1304 	ld	de, #0x0009
      0005FF 19               [11] 1305 	add	hl, de
      000600 7E               [ 7] 1306 	ld	a, (hl)
      000601 DD 77 FC         [19] 1307 	ld	-4 (ix), a
      000604 23               [ 6] 1308 	inc	hl
      000605 7E               [ 7] 1309 	ld	a, (hl)
      000606 DD 77 FD         [19] 1310 	ld	-3 (ix), a
      000609 DD 7E FC         [19] 1311 	ld	a, -4 (ix)
      00060C DD 77 FA         [19] 1312 	ld	-6 (ix), a
      00060F DD 7E FD         [19] 1313 	ld	a, -3 (ix)
      000612 DD 77 FB         [19] 1314 	ld	-5 (ix), a
      000615 06 05            [ 7] 1315 	ld	b, #0x05
      000617                       1316 00135$:
      000617 DD CB FA 26      [23] 1317 	sla	-6 (ix)
      00061B DD CB FB 16      [23] 1318 	rl	-5 (ix)
      00061F 10 F6            [13] 1319 	djnz	00135$
      000621 DD 7E FA         [19] 1320 	ld	a, -6 (ix)
      000624 DD 77 FC         [19] 1321 	ld	-4 (ix), a
      000627 DD 7E FB         [19] 1322 	ld	a, -5 (ix)
      00062A F6 40            [ 7] 1323 	or	a, #0x40
      00062C DD 77 FD         [19] 1324 	ld	-3 (ix), a
      00062F C1               [10] 1325 	pop	bc
      000630 E1               [10] 1326 	pop	hl
      000631 E5               [11] 1327 	push	hl
      000632 C5               [11] 1328 	push	bc
      000633 E5               [11] 1329 	push	hl
      000634 DD 6E F8         [19] 1330 	ld	l, -8 (ix)
      000637 DD 66 F9         [19] 1331 	ld	h, -7 (ix)
      00063A E5               [11] 1332 	push	hl
      00063B DD 6E FC         [19] 1333 	ld	l, -4 (ix)
      00063E DD 66 FD         [19] 1334 	ld	h, -3 (ix)
      000641 E5               [11] 1335 	push	hl
      000642 CDr00r00         [17] 1336 	call	_SMS_VRAMmemcpy
      000645                       1337 00103$:
                           000645  1338 	C$spriteengine.c$94$4_0$123	= .
                                   1339 	.globl	C$spriteengine.c$94$4_0$123
                                   1340 ;spriteengine.c:94: entitylist[i]->has2ReloadTiles = false;
      000645 E1               [10] 1341 	pop	hl
      000646 E5               [11] 1342 	push	hl
      000647 4E               [ 7] 1343 	ld	c, (hl)
      000648 23               [ 6] 1344 	inc	hl
      000649 46               [ 7] 1345 	ld	b, (hl)
      00064A 21 0B 00         [10] 1346 	ld	hl, #0x000b
      00064D 09               [11] 1347 	add	hl, bc
      00064E 36 00            [10] 1348 	ld	(hl), #0x00
      000650                       1349 00109$:
                           000650  1350 	C$spriteengine.c$85$2_0$121	= .
                                   1351 	.globl	C$spriteengine.c$85$2_0$121
                                   1352 ;spriteengine.c:85: for(i = 0;i < entityIndex; i++) {
      000650 DD 34 FE         [23] 1353 	inc	-2 (ix)
      000653 C2rB5r03         [10] 1354 	jp	NZ,00108$
      000656 DD 34 FF         [23] 1355 	inc	-1 (ix)
      000659 C3rB5r03         [10] 1356 	jp	00108$
      00065C                       1357 00110$:
                           00065C  1358 	C$spriteengine.c$97$2_0$121	= .
                                   1359 	.globl	C$spriteengine.c$97$2_0$121
                                   1360 ;spriteengine.c:97: }
      00065C DD F9            [10] 1361 	ld	sp, ix
      00065E DD E1            [14] 1362 	pop	ix
                           000660  1363 	C$spriteengine.c$97$2_0$121	= .
                                   1364 	.globl	C$spriteengine.c$97$2_0$121
                           000660  1365 	XG$updateTiles$0$0	= .
                                   1366 	.globl	XG$updateTiles$0$0
      000660 C9               [10] 1367 	ret
                           000661  1368 	G$drawEntities$0$0	= .
                                   1369 	.globl	G$drawEntities$0$0
                           000661  1370 	C$spriteengine.c$99$2_0$126	= .
                                   1371 	.globl	C$spriteengine.c$99$2_0$126
                                   1372 ;spriteengine.c:99: void drawEntities() {
                                   1373 ;	---------------------------------
                                   1374 ; Function drawEntities
                                   1375 ; ---------------------------------
      000661                       1376 _drawEntities::
      000661 DD E5            [15] 1377 	push	ix
      000663 DD 21 00 00      [14] 1378 	ld	ix,#0
      000667 DD 39            [15] 1379 	add	ix,sp
      000669 21 EF FF         [10] 1380 	ld	hl, #-17
      00066C 39               [11] 1381 	add	hl, sp
      00066D F9               [ 6] 1382 	ld	sp, hl
                           00066E  1383 	C$spriteengine.c$101$1_0$126	= .
                                   1384 	.globl	C$spriteengine.c$101$1_0$126
                                   1385 ;spriteengine.c:101: SMS_initSprites();
      00066E CDr00r00         [17] 1386 	call	_SMS_initSprites
                           000671  1387 	C$spriteengine.c$102$3_0$128	= .
                                   1388 	.globl	C$spriteengine.c$102$3_0$128
                                   1389 ;spriteengine.c:102: for(i = 0; i < entityIndex; i++) {
      000671 AF               [ 4] 1390 	xor	a, a
      000672 DD 77 FC         [19] 1391 	ld	-4 (ix), a
      000675 DD 77 FD         [19] 1392 	ld	-3 (ix), a
      000678                       1393 00114$:
      000678 3Ar00r00         [13] 1394 	ld	a, (#_entityIndex + 0)
      00067B 4F               [ 4] 1395 	ld	c, a
      00067C 06 00            [ 7] 1396 	ld	b, #0x00
      00067E DD 7E FC         [19] 1397 	ld	a, -4 (ix)
      000681 91               [ 4] 1398 	sub	a, c
      000682 DD 7E FD         [19] 1399 	ld	a, -3 (ix)
      000685 98               [ 4] 1400 	sbc	a, b
      000686 E2r8Br06         [10] 1401 	jp	PO, 00156$
      000689 EE 80            [ 7] 1402 	xor	a, #0x80
      00068B                       1403 00156$:
      00068B F2rD3r08         [10] 1404 	jp	P, 00106$
                           00068E  1405 	C$spriteengine.c$103$3_0$128	= .
                                   1406 	.globl	C$spriteengine.c$103$3_0$128
                                   1407 ;spriteengine.c:103: if(entitylist[i]->direction == RIGHT_DIRECTION) {
      00068E DD 7E FC         [19] 1408 	ld	a, -4 (ix)
      000691 DD 77 FA         [19] 1409 	ld	-6 (ix), a
      000694 DD 7E FD         [19] 1410 	ld	a, -3 (ix)
      000697 DD 77 FB         [19] 1411 	ld	-5 (ix), a
      00069A DD CB FA 26      [23] 1412 	sla	-6 (ix)
      00069E DD CB FB 16      [23] 1413 	rl	-5 (ix)
      0006A2 DD 7E FA         [19] 1414 	ld	a, -6 (ix)
      0006A5 C6r00            [ 7] 1415 	add	a, #<(_entitylist)
      0006A7 DD 77 FE         [19] 1416 	ld	-2 (ix), a
      0006AA DD 7E FB         [19] 1417 	ld	a, -5 (ix)
      0006AD CEs00            [ 7] 1418 	adc	a, #>(_entitylist)
      0006AF DD 77 FF         [19] 1419 	ld	-1 (ix), a
      0006B2 DD 6E FE         [19] 1420 	ld	l, -2 (ix)
      0006B5 DD 66 FF         [19] 1421 	ld	h, -1 (ix)
      0006B8 4E               [ 7] 1422 	ld	c, (hl)
      0006B9 23               [ 6] 1423 	inc	hl
      0006BA 46               [ 7] 1424 	ld	b, (hl)
      0006BB 21 05 00         [10] 1425 	ld	hl, #5
      0006BE 09               [11] 1426 	add	hl, bc
      0006BF 7E               [ 7] 1427 	ld	a, (hl)
      0006C0 DD 77 FB         [19] 1428 	ld	-5 (ix), a
      0006C3 B7               [ 4] 1429 	or	a, a
      0006C4 C2r98r07         [10] 1430 	jp	NZ, 00123$
                           0006C7  1431 	C$spriteengine.c$104$5_0$130	= .
                                   1432 	.globl	C$spriteengine.c$104$5_0$130
                                   1433 ;spriteengine.c:104: for(j = 0; j < entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].numsprites; j++){
      0006C7 DD 7E FE         [19] 1434 	ld	a, -2 (ix)
      0006CA DD 77 F8         [19] 1435 	ld	-8 (ix), a
      0006CD DD 7E FF         [19] 1436 	ld	a, -1 (ix)
      0006D0 DD 77 F9         [19] 1437 	ld	-7 (ix), a
      0006D3 AF               [ 4] 1438 	xor	a, a
      0006D4 DD 77 FE         [19] 1439 	ld	-2 (ix), a
      0006D7 DD 77 FF         [19] 1440 	ld	-1 (ix), a
      0006DA                       1441 00108$:
      0006DA DD 6E F8         [19] 1442 	ld	l, -8 (ix)
      0006DD DD 66 F9         [19] 1443 	ld	h, -7 (ix)
      0006E0 4E               [ 7] 1444 	ld	c, (hl)
      0006E1 23               [ 6] 1445 	inc	hl
      0006E2 46               [ 7] 1446 	ld	b, (hl)
      0006E3 69               [ 4] 1447 	ld	l, c
      0006E4 60               [ 4] 1448 	ld	h, b
      0006E5 5E               [ 7] 1449 	ld	e, (hl)
      0006E6 23               [ 6] 1450 	inc	hl
      0006E7 56               [ 7] 1451 	ld	d, (hl)
      0006E8 13               [ 6] 1452 	inc	de
      0006E9 13               [ 6] 1453 	inc	de
      0006EA 69               [ 4] 1454 	ld	l, c
      0006EB 60               [ 4] 1455 	ld	h, b
      0006EC C5               [11] 1456 	push	bc
      0006ED 01 06 00         [10] 1457 	ld	bc, #0x0006
      0006F0 09               [11] 1458 	add	hl, bc
      0006F1 C1               [10] 1459 	pop	bc
      0006F2 6E               [ 7] 1460 	ld	l, (hl)
      0006F3 26 00            [ 7] 1461 	ld	h, #0x00
      0006F5 D5               [11] 1462 	push	de
      0006F6 5D               [ 4] 1463 	ld	e, l
      0006F7 54               [ 4] 1464 	ld	d, h
      0006F8 29               [11] 1465 	add	hl, hl
      0006F9 29               [11] 1466 	add	hl, hl
      0006FA 19               [11] 1467 	add	hl, de
      0006FB 29               [11] 1468 	add	hl, hl
      0006FC 29               [11] 1469 	add	hl, hl
      0006FD 29               [11] 1470 	add	hl, hl
      0006FE 29               [11] 1471 	add	hl, hl
      0006FF 19               [11] 1472 	add	hl, de
      000700 29               [11] 1473 	add	hl, hl
      000701 19               [11] 1474 	add	hl, de
      000702 29               [11] 1475 	add	hl, hl
      000703 29               [11] 1476 	add	hl, hl
      000704 D1               [10] 1477 	pop	de
      000705 19               [11] 1478 	add	hl, de
      000706 EB               [ 4] 1479 	ex	de, hl
      000707 13               [ 6] 1480 	inc	de
      000708 13               [ 6] 1481 	inc	de
      000709 69               [ 4] 1482 	ld	l, c
      00070A 60               [ 4] 1483 	ld	h, b
      00070B C5               [11] 1484 	push	bc
      00070C 01 07 00         [10] 1485 	ld	bc, #0x0007
      00070F 09               [11] 1486 	add	hl, bc
      000710 C1               [10] 1487 	pop	bc
      000711 7E               [ 7] 1488 	ld	a, (hl)
      000712 D5               [11] 1489 	push	de
      000713 5F               [ 4] 1490 	ld	e, a
      000714 16 00            [ 7] 1491 	ld	d, #0x00
      000716 6B               [ 4] 1492 	ld	l, e
      000717 62               [ 4] 1493 	ld	h, d
      000718 29               [11] 1494 	add	hl, hl
      000719 29               [11] 1495 	add	hl, hl
      00071A 29               [11] 1496 	add	hl, hl
      00071B 29               [11] 1497 	add	hl, hl
      00071C 29               [11] 1498 	add	hl, hl
      00071D 29               [11] 1499 	add	hl, hl
      00071E 19               [11] 1500 	add	hl, de
      00071F D1               [10] 1501 	pop	de
      000720 19               [11] 1502 	add	hl, de
      000721 5D               [ 4] 1503 	ld	e, l
      000722 54               [ 4] 1504 	ld	d, h
      000723 23               [ 6] 1505 	inc	hl
      000724 23               [ 6] 1506 	inc	hl
      000725 6E               [ 7] 1507 	ld	l, (hl)
      000726 26 00            [ 7] 1508 	ld	h, #0x00
      000728 DD 7E FE         [19] 1509 	ld	a, -2 (ix)
      00072B 95               [ 4] 1510 	sub	a, l
      00072C DD 7E FF         [19] 1511 	ld	a, -1 (ix)
      00072F 9C               [ 4] 1512 	sbc	a, h
      000730 E2r35r07         [10] 1513 	jp	PO, 00158$
      000733 EE 80            [ 7] 1514 	xor	a, #0x80
      000735                       1515 00158$:
      000735 F2rC7r08         [10] 1516 	jp	P, 00115$
                           000738  1517 	C$spriteengine.c$105$6_0$131	= .
                                   1518 	.globl	C$spriteengine.c$105$6_0$131
                                   1519 ;spriteengine.c:105: SMS_addSprite (entitylist[i]->px + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tilelist[j].dpx,entitylist[i]->py + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tilelist[j].dpy,entitylist[i]->vramposition + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].tilelist[j].tile);
      000738 69               [ 4] 1520 	ld	l, c
      000739 60               [ 4] 1521 	ld	h, b
      00073A C5               [11] 1522 	push	bc
      00073B 01 09 00         [10] 1523 	ld	bc, #0x0009
      00073E 09               [11] 1524 	add	hl, bc
      00073F C1               [10] 1525 	pop	bc
      000740 7E               [ 7] 1526 	ld	a, (hl)
      000741 DD 77 FB         [19] 1527 	ld	-5 (ix), a
      000744 21 11 00         [10] 1528 	ld	hl, #0x0011
      000747 19               [11] 1529 	add	hl, de
      000748 E5               [11] 1530 	push	hl
      000749 DD 5E FE         [19] 1531 	ld	e, -2 (ix)
      00074C DD 56 FF         [19] 1532 	ld	d, -1 (ix)
      00074F 6B               [ 4] 1533 	ld	l, e
      000750 62               [ 4] 1534 	ld	h, d
      000751 29               [11] 1535 	add	hl, hl
      000752 19               [11] 1536 	add	hl, de
      000753 D1               [10] 1537 	pop	de
      000754 19               [11] 1538 	add	hl, de
      000755 EB               [ 4] 1539 	ex	de, hl
      000756 1A               [ 7] 1540 	ld	a, (de)
      000757 DD 86 FB         [19] 1541 	add	a, -5 (ix)
      00075A DD 77 FA         [19] 1542 	ld	-6 (ix), a
      00075D 69               [ 4] 1543 	ld	l, c
      00075E 60               [ 4] 1544 	ld	h, b
      00075F 23               [ 6] 1545 	inc	hl
      000760 23               [ 6] 1546 	inc	hl
      000761 23               [ 6] 1547 	inc	hl
      000762 23               [ 6] 1548 	inc	hl
      000763 7E               [ 7] 1549 	ld	a, (hl)
      000764 DD 77 FB         [19] 1550 	ld	-5 (ix), a
      000767 6B               [ 4] 1551 	ld	l, e
      000768 62               [ 4] 1552 	ld	h, d
      000769 23               [ 6] 1553 	inc	hl
      00076A 23               [ 6] 1554 	inc	hl
      00076B 7E               [ 7] 1555 	ld	a, (hl)
      00076C DD 6E FB         [19] 1556 	ld	l, -5 (ix)
      00076F 85               [ 4] 1557 	add	a, l
      000770 DD 77 FB         [19] 1558 	ld	-5 (ix), a
      000773 21 03 00         [10] 1559 	ld	hl, #3
      000776 09               [11] 1560 	add	hl, bc
      000777 4E               [ 7] 1561 	ld	c, (hl)
      000778 13               [ 6] 1562 	inc	de
      000779 1A               [ 7] 1563 	ld	a, (de)
      00077A 81               [ 4] 1564 	add	a, c
      00077B DD 66 FA         [19] 1565 	ld	h, -6 (ix)
      00077E E5               [11] 1566 	push	hl
      00077F 33               [ 6] 1567 	inc	sp
      000780 DD 66 FB         [19] 1568 	ld	h, -5 (ix)
      000783 E5               [11] 1569 	push	hl
      000784 33               [ 6] 1570 	inc	sp
      000785 F5               [11] 1571 	push	af
      000786 33               [ 6] 1572 	inc	sp
      000787 CDr00r00         [17] 1573 	call	_SMS_addSprite
      00078A F1               [10] 1574 	pop	af
      00078B 33               [ 6] 1575 	inc	sp
                           00078C  1576 	C$spriteengine.c$104$5_0$130	= .
                                   1577 	.globl	C$spriteengine.c$104$5_0$130
                                   1578 ;spriteengine.c:104: for(j = 0; j < entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].framelist[entitylist[i]->currentFrame].numsprites; j++){
      00078C DD 34 FE         [23] 1579 	inc	-2 (ix)
      00078F C2rDAr06         [10] 1580 	jp	NZ,00108$
      000792 DD 34 FF         [23] 1581 	inc	-1 (ix)
      000795 C3rDAr06         [10] 1582 	jp	00108$
                           000798  1583 	C$spriteengine.c$108$1_0$126	= .
                                   1584 	.globl	C$spriteengine.c$108$1_0$126
                                   1585 ;spriteengine.c:108: for(j = 0; j < entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].numsprites; j++){
      000798                       1586 00123$:
      000798 DD 7E FE         [19] 1587 	ld	a, -2 (ix)
      00079B DD 77 F3         [19] 1588 	ld	-13 (ix), a
      00079E DD 7E FF         [19] 1589 	ld	a, -1 (ix)
      0007A1 DD 77 F4         [19] 1590 	ld	-12 (ix), a
      0007A4 AF               [ 4] 1591 	xor	a, a
      0007A5 DD 77 FE         [19] 1592 	ld	-2 (ix), a
      0007A8 DD 77 FF         [19] 1593 	ld	-1 (ix), a
      0007AB                       1594 00111$:
      0007AB DD 6E F3         [19] 1595 	ld	l, -13 (ix)
      0007AE DD 66 F4         [19] 1596 	ld	h, -12 (ix)
      0007B1 7E               [ 7] 1597 	ld	a, (hl)
      0007B2 DD 77 F5         [19] 1598 	ld	-11 (ix), a
      0007B5 23               [ 6] 1599 	inc	hl
      0007B6 7E               [ 7] 1600 	ld	a, (hl)
      0007B7 DD 77 F6         [19] 1601 	ld	-10 (ix), a
      0007BA DD 6E F5         [19] 1602 	ld	l, -11 (ix)
      0007BD DD 66 F6         [19] 1603 	ld	h, -10 (ix)
      0007C0 4E               [ 7] 1604 	ld	c, (hl)
      0007C1 23               [ 6] 1605 	inc	hl
      0007C2 46               [ 7] 1606 	ld	b, (hl)
      0007C3 03               [ 6] 1607 	inc	bc
      0007C4 03               [ 6] 1608 	inc	bc
      0007C5 DD 5E F5         [19] 1609 	ld	e, -11 (ix)
      0007C8 DD 56 F6         [19] 1610 	ld	d, -10 (ix)
      0007CB 21 06 00         [10] 1611 	ld	hl, #6
      0007CE 19               [11] 1612 	add	hl, de
      0007CF 5E               [ 7] 1613 	ld	e, (hl)
      0007D0 16 00            [ 7] 1614 	ld	d, #0x00
      0007D2 6B               [ 4] 1615 	ld	l, e
      0007D3 62               [ 4] 1616 	ld	h, d
      0007D4 29               [11] 1617 	add	hl, hl
      0007D5 29               [11] 1618 	add	hl, hl
      0007D6 19               [11] 1619 	add	hl, de
      0007D7 29               [11] 1620 	add	hl, hl
      0007D8 29               [11] 1621 	add	hl, hl
      0007D9 29               [11] 1622 	add	hl, hl
      0007DA 29               [11] 1623 	add	hl, hl
      0007DB 19               [11] 1624 	add	hl, de
      0007DC 29               [11] 1625 	add	hl, hl
      0007DD 19               [11] 1626 	add	hl, de
      0007DE 29               [11] 1627 	add	hl, hl
      0007DF 29               [11] 1628 	add	hl, hl
      0007E0 09               [11] 1629 	add	hl, bc
      0007E1 EB               [ 4] 1630 	ex	de, hl
      0007E2 21 47 01         [10] 1631 	ld	hl, #0x0147
      0007E5 19               [11] 1632 	add	hl, de
      0007E6 EB               [ 4] 1633 	ex	de, hl
      0007E7 DD 4E F5         [19] 1634 	ld	c, -11 (ix)
      0007EA DD 46 F6         [19] 1635 	ld	b, -10 (ix)
      0007ED 21 07 00         [10] 1636 	ld	hl, #7
      0007F0 09               [11] 1637 	add	hl, bc
      0007F1 4E               [ 7] 1638 	ld	c, (hl)
      0007F2 06 00            [ 7] 1639 	ld	b, #0x00
      0007F4 69               [ 4] 1640 	ld	l, c
      0007F5 60               [ 4] 1641 	ld	h, b
      0007F6 29               [11] 1642 	add	hl, hl
      0007F7 29               [11] 1643 	add	hl, hl
      0007F8 29               [11] 1644 	add	hl, hl
      0007F9 29               [11] 1645 	add	hl, hl
      0007FA 29               [11] 1646 	add	hl, hl
      0007FB 29               [11] 1647 	add	hl, hl
      0007FC 09               [11] 1648 	add	hl, bc
      0007FD 19               [11] 1649 	add	hl, de
      0007FE 4D               [ 4] 1650 	ld	c,l
      0007FF 44               [ 4] 1651 	ld	b,h
      000800 23               [ 6] 1652 	inc	hl
      000801 23               [ 6] 1653 	inc	hl
      000802 5E               [ 7] 1654 	ld	e, (hl)
      000803 16 00            [ 7] 1655 	ld	d, #0x00
      000805 DD 7E FE         [19] 1656 	ld	a, -2 (ix)
      000808 93               [ 4] 1657 	sub	a, e
      000809 DD 7E FF         [19] 1658 	ld	a, -1 (ix)
      00080C 9A               [ 4] 1659 	sbc	a, d
      00080D E2r12r08         [10] 1660 	jp	PO, 00160$
      000810 EE 80            [ 7] 1661 	xor	a, #0x80
      000812                       1662 00160$:
      000812 F2rC7r08         [10] 1663 	jp	P, 00115$
                           000815  1664 	C$spriteengine.c$109$6_0$134	= .
                                   1665 	.globl	C$spriteengine.c$109$6_0$134
                                   1666 ;spriteengine.c:109: SMS_addSprite (entitylist[i]->px + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].tilelist[j].dpx,entitylist[i]->py + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].tilelist[j].dpy,entitylist[i]->vramposition + entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].tilelist[j].tile);
      000815 DD 5E F5         [19] 1667 	ld	e, -11 (ix)
      000818 DD 56 F6         [19] 1668 	ld	d, -10 (ix)
      00081B 21 09 00         [10] 1669 	ld	hl, #9
      00081E 19               [11] 1670 	add	hl, de
      00081F 7E               [ 7] 1671 	ld	a, (hl)
      000820 DD 77 FA         [19] 1672 	ld	-6 (ix), a
      000823 21 11 00         [10] 1673 	ld	hl, #0x0011
      000826 09               [11] 1674 	add	hl, bc
      000827 E3               [19] 1675 	ex	(sp), hl
      000828 DD 4E FE         [19] 1676 	ld	c, -2 (ix)
      00082B DD 46 FF         [19] 1677 	ld	b, -1 (ix)
      00082E 69               [ 4] 1678 	ld	l, c
      00082F 60               [ 4] 1679 	ld	h, b
      000830 29               [11] 1680 	add	hl, hl
      000831 09               [11] 1681 	add	hl, bc
      000832 DD 75 F1         [19] 1682 	ld	-15 (ix), l
      000835 DD 74 F2         [19] 1683 	ld	-14 (ix), h
      000838 DD 7E F1         [19] 1684 	ld	a, -15 (ix)
      00083B DD 86 EF         [19] 1685 	add	a, -17 (ix)
      00083E DD 77 F7         [19] 1686 	ld	-9 (ix), a
      000841 DD 7E F2         [19] 1687 	ld	a, -14 (ix)
      000844 DD 8E F0         [19] 1688 	adc	a, -16 (ix)
      000847 DD 77 F8         [19] 1689 	ld	-8 (ix), a
      00084A DD 6E F7         [19] 1690 	ld	l, -9 (ix)
      00084D DD 66 F8         [19] 1691 	ld	h, -8 (ix)
      000850 7E               [ 7] 1692 	ld	a, (hl)
      000851 DD 77 FB         [19] 1693 	ld	-5 (ix), a
      000854 DD 86 FA         [19] 1694 	add	a, -6 (ix)
      000857 DD 77 FA         [19] 1695 	ld	-6 (ix), a
      00085A DD 4E F5         [19] 1696 	ld	c, -11 (ix)
      00085D DD 46 F6         [19] 1697 	ld	b, -10 (ix)
      000860 21 04 00         [10] 1698 	ld	hl, #4
      000863 09               [11] 1699 	add	hl, bc
      000864 7E               [ 7] 1700 	ld	a, (hl)
      000865 DD 77 FB         [19] 1701 	ld	-5 (ix), a
      000868 DD 7E F7         [19] 1702 	ld	a, -9 (ix)
      00086B DD 77 F1         [19] 1703 	ld	-15 (ix), a
      00086E DD 7E F8         [19] 1704 	ld	a, -8 (ix)
      000871 DD 77 F2         [19] 1705 	ld	-14 (ix), a
      000874 DD 6E F1         [19] 1706 	ld	l, -15 (ix)
      000877 DD 66 F2         [19] 1707 	ld	h, -14 (ix)
      00087A 23               [ 6] 1708 	inc	hl
      00087B 23               [ 6] 1709 	inc	hl
      00087C 7E               [ 7] 1710 	ld	a, (hl)
      00087D DD 77 F9         [19] 1711 	ld	-7 (ix), a
      000880 DD 7E FB         [19] 1712 	ld	a, -5 (ix)
      000883 DD 86 F9         [19] 1713 	add	a, -7 (ix)
      000886 DD 77 FB         [19] 1714 	ld	-5 (ix), a
      000889 DD 6E F5         [19] 1715 	ld	l, -11 (ix)
      00088C DD 66 F6         [19] 1716 	ld	h, -10 (ix)
      00088F 23               [ 6] 1717 	inc	hl
      000890 23               [ 6] 1718 	inc	hl
      000891 23               [ 6] 1719 	inc	hl
      000892 7E               [ 7] 1720 	ld	a, (hl)
      000893 DD 77 F9         [19] 1721 	ld	-7 (ix), a
      000896 DD 6E F7         [19] 1722 	ld	l, -9 (ix)
      000899 DD 66 F8         [19] 1723 	ld	h, -8 (ix)
      00089C 23               [ 6] 1724 	inc	hl
      00089D 7E               [ 7] 1725 	ld	a, (hl)
      00089E DD 77 F8         [19] 1726 	ld	-8 (ix), a
      0008A1 DD 7E F9         [19] 1727 	ld	a, -7 (ix)
      0008A4 DD 86 F8         [19] 1728 	add	a, -8 (ix)
      0008A7 DD 77 F9         [19] 1729 	ld	-7 (ix), a
      0008AA DD 66 FA         [19] 1730 	ld	h, -6 (ix)
      0008AD DD 6E FB         [19] 1731 	ld	l, -5 (ix)
      0008B0 E5               [11] 1732 	push	hl
      0008B1 DD 7E F9         [19] 1733 	ld	a, -7 (ix)
      0008B4 F5               [11] 1734 	push	af
      0008B5 33               [ 6] 1735 	inc	sp
      0008B6 CDr00r00         [17] 1736 	call	_SMS_addSprite
      0008B9 F1               [10] 1737 	pop	af
      0008BA 33               [ 6] 1738 	inc	sp
                           0008BB  1739 	C$spriteengine.c$108$5_0$133	= .
                                   1740 	.globl	C$spriteengine.c$108$5_0$133
                                   1741 ;spriteengine.c:108: for(j = 0; j < entitylist[i]->characterData->animationlist[entitylist[i]->currentAnimation].mirroredframelist[entitylist[i]->currentFrame].numsprites; j++){
      0008BB DD 34 FE         [23] 1742 	inc	-2 (ix)
      0008BE C2rABr07         [10] 1743 	jp	NZ,00111$
      0008C1 DD 34 FF         [23] 1744 	inc	-1 (ix)
      0008C4 C3rABr07         [10] 1745 	jp	00111$
      0008C7                       1746 00115$:
                           0008C7  1747 	C$spriteengine.c$102$2_0$127	= .
                                   1748 	.globl	C$spriteengine.c$102$2_0$127
                                   1749 ;spriteengine.c:102: for(i = 0; i < entityIndex; i++) {
      0008C7 DD 34 FC         [23] 1750 	inc	-4 (ix)
      0008CA C2r78r06         [10] 1751 	jp	NZ,00114$
      0008CD DD 34 FD         [23] 1752 	inc	-3 (ix)
      0008D0 C3r78r06         [10] 1753 	jp	00114$
      0008D3                       1754 00106$:
                           0008D3  1755 	C$spriteengine.c$113$1_0$126	= .
                                   1756 	.globl	C$spriteengine.c$113$1_0$126
                                   1757 ;spriteengine.c:113: SMS_finalizeSprites();
      0008D3 CDr00r00         [17] 1758 	call	_SMS_finalizeSprites
                           0008D6  1759 	C$spriteengine.c$114$1_0$126	= .
                                   1760 	.globl	C$spriteengine.c$114$1_0$126
                                   1761 ;spriteengine.c:114: }
      0008D6 DD F9            [10] 1762 	ld	sp, ix
      0008D8 DD E1            [14] 1763 	pop	ix
                           0008DA  1764 	C$spriteengine.c$114$1_0$126	= .
                                   1765 	.globl	C$spriteengine.c$114$1_0$126
                           0008DA  1766 	XG$drawEntities$0$0	= .
                                   1767 	.globl	XG$drawEntities$0$0
      0008DA C9               [10] 1768 	ret
                           0008DB  1769 	G$move_entity$0$0	= .
                                   1770 	.globl	G$move_entity$0$0
                           0008DB  1771 	C$spriteengine.c$116$1_0$136	= .
                                   1772 	.globl	C$spriteengine.c$116$1_0$136
                                   1773 ;spriteengine.c:116: void move_entity(unsigned char entitynumber, signed char x, signed char y) {
                                   1774 ;	---------------------------------
                                   1775 ; Function move_entity
                                   1776 ; ---------------------------------
      0008DB                       1777 _move_entity::
      0008DB DD E5            [15] 1778 	push	ix
      0008DD DD 21 00 00      [14] 1779 	ld	ix,#0
      0008E1 DD 39            [15] 1780 	add	ix,sp
                           0008E3  1781 	C$spriteengine.c$117$1_0$136	= .
                                   1782 	.globl	C$spriteengine.c$117$1_0$136
                                   1783 ;spriteengine.c:117: entitylist[entitynumber]->px = entitylist[entitynumber]->px + x;
      0008E3 01r00r00         [10] 1784 	ld	bc, #_entitylist+0
      0008E6 DD 6E 04         [19] 1785 	ld	l, 4 (ix)
      0008E9 26 00            [ 7] 1786 	ld	h, #0x00
      0008EB 29               [11] 1787 	add	hl, hl
      0008EC 09               [11] 1788 	add	hl, bc
      0008ED 5D               [ 4] 1789 	ld	e, l
      0008EE 54               [ 4] 1790 	ld	d, h
      0008EF 4E               [ 7] 1791 	ld	c, (hl)
      0008F0 23               [ 6] 1792 	inc	hl
      0008F1 46               [ 7] 1793 	ld	b, (hl)
      0008F2 03               [ 6] 1794 	inc	bc
      0008F3 03               [ 6] 1795 	inc	bc
      0008F4 03               [ 6] 1796 	inc	bc
      0008F5 0A               [ 7] 1797 	ld	a, (bc)
      0008F6 DD 86 05         [19] 1798 	add	a, 5 (ix)
      0008F9 02               [ 7] 1799 	ld	(bc), a
                           0008FA  1800 	C$spriteengine.c$118$1_0$136	= .
                                   1801 	.globl	C$spriteengine.c$118$1_0$136
                                   1802 ;spriteengine.c:118: entitylist[entitynumber]->py = entitylist[entitynumber]->py + y;
      0008FA EB               [ 4] 1803 	ex	de,hl
      0008FB 4E               [ 7] 1804 	ld	c, (hl)
      0008FC 23               [ 6] 1805 	inc	hl
      0008FD 46               [ 7] 1806 	ld	b, (hl)
      0008FE 03               [ 6] 1807 	inc	bc
      0008FF 03               [ 6] 1808 	inc	bc
      000900 03               [ 6] 1809 	inc	bc
      000901 03               [ 6] 1810 	inc	bc
      000902 0A               [ 7] 1811 	ld	a, (bc)
      000903 DD 86 06         [19] 1812 	add	a, 6 (ix)
      000906 02               [ 7] 1813 	ld	(bc), a
                           000907  1814 	C$spriteengine.c$119$1_0$136	= .
                                   1815 	.globl	C$spriteengine.c$119$1_0$136
                                   1816 ;spriteengine.c:119: }
      000907 DD E1            [14] 1817 	pop	ix
                           000909  1818 	C$spriteengine.c$119$1_0$136	= .
                                   1819 	.globl	C$spriteengine.c$119$1_0$136
                           000909  1820 	XG$move_entity$0$0	= .
                                   1821 	.globl	XG$move_entity$0$0
      000909 C9               [10] 1822 	ret
                                   1823 	.area _CODE
                                   1824 	.area _INITIALIZER
                           000000  1825 Fspriteengine$__xinit_entityIndex$0_0$0 == .
      000000                       1826 __xinit__entityIndex:
      000000 00                    1827 	.db #0x00	; 0
                           000001  1828 Fspriteengine$__xinit_entityVramPosition$0_0$0 == .
      000001                       1829 __xinit__entityVramPosition:
      000001 00 01                 1830 	.dw #0x0100
                                   1831 	.area _CABS (ABS)
